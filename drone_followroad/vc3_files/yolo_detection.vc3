{"editor":{"id":"d8e8741a-2f1b-483e-81b8-aaf5c375c569","locked":false,"offsetX":67.33797572524225,"offsetY":258.68495699128596,"zoom":135.33333333333337,"gridSize":0,"layers":[{"id":"55c74ddc-2afc-4174-ba7c-e9766884c245","type":"diagram-links","isSvg":true,"transformed":true,"models":{"fe0bcf86-3631-4a91-a6a7-713fba766e72":{"id":"fe0bcf86-3631-4a91-a6a7-713fba766e72","type":"default","selected":false,"source":"0d219e52-cc76-4bfa-a257-6eb3837bf5e6","sourcePort":"1d7b3d6f-daa7-4b62-8b3e-1afb22a760c9","target":"47ea10ba-8ded-41c2-9bbc-f509b88580c9","targetPort":"d552e6c6-f74f-4152-a2bb-3a43361e551c","points":[{"id":"2a704780-1f2b-4bb4-98cc-14bbf0030394","type":"point","x":392.7031240552011,"y":119.62500877890466},{"id":"7d3fb7e7-ed5b-497f-9d92-fe494fc50f6e","type":"point","x":465.3906282645222,"y":100.84375456958354}],"labels":[],"width":3,"color":"gray","curvyness":50,"selectedColor":"rgb(0,192,255)"},"399ffdc7-961c-44a7-a062-75a1c978e61d":{"id":"399ffdc7-961c-44a7-a062-75a1c978e61d","type":"default","selected":false,"source":"47ea10ba-8ded-41c2-9bbc-f509b88580c9","sourcePort":"b06b1848-1daf-4432-9ecc-9700f251b91c","target":"b9672fa9-2972-40f4-9513-8614c5a1bbcc","targetPort":"71e6c7d0-8c29-4677-963d-f72501ba50a9","points":[{"id":"b4fb06b3-5f98-41be-aaef-00b233a4a2cb","type":"point","x":580.3906267611933,"y":121.84375321658746},{"id":"8e6e3ce9-24c7-46c8-8400-3189c508c24e","type":"point","x":632.5781207478774,"y":101.20313287690728}],"labels":[],"width":3,"color":"gray","curvyness":50,"selectedColor":"rgb(0,192,255)"}}},{"id":"e22d65fb-d469-4a6d-ae0b-2adbdd61a919","type":"diagram-nodes","isSvg":false,"transformed":true,"models":{"0d219e52-cc76-4bfa-a257-6eb3837bf5e6":{"id":"0d219e52-cc76-4bfa-a257-6eb3837bf5e6","type":"block.package","selected":false,"x":269.2118226600985,"y":74.13793103448276,"ports":[{"id":"92dbb8b1-2027-46aa-90a6-5e254a403189","type":"port.input","x":270.20313006851705,"y":112.12500201392429,"name":"30235114-1447-4791-8bb2-d35880bbc4b1","alignment":"left","parentNode":"0d219e52-cc76-4bfa-a257-6eb3837bf5e6","links":[],"in":true,"label":"E","hideLabel":false},{"id":"1d7b3d6f-daa7-4b62-8b3e-1afb22a760c9","type":"port.output","x":385.20310601525347,"y":112.12500201392429,"name":"c3b1b689-2693-4d76-8486-ea124e8c134b","alignment":"right","parentNode":"0d219e52-cc76-4bfa-a257-6eb3837bf5e6","links":["fe0bcf86-3631-4a91-a6a7-713fba766e72"],"in":false,"label":"Out","hideLabel":false}],"data":{},"model":{"id":"cbc1fc5a-26b0-4972-8382-be55aa4427dd","locked":false,"offsetX":0,"offsetY":0,"zoom":100,"gridSize":0,"layers":[{"id":"d7e8bafa-1140-46a4-9019-bb4f23f31dbc","type":"diagram-links","isSvg":true,"transformed":true,"models":{"094e46b3-bf06-4d7b-95e9-0e29047dd4f8":{"id":"094e46b3-bf06-4d7b-95e9-0e29047dd4f8","type":"default","selected":false,"source":"0001-cb1a567b-b8db-4066-91cb-27a697a56d81","sourcePort":"66a453d3-26fc-49de-8859-19751d184b06","target":"883d815b-9c5b-49fc-ba7d-a656199e3e74","targetPort":"3ce1d22e-8b1c-4c42-b0a7-0638da6749b2","points":[{"id":"d4a722ec-0efb-4e43-ab08-62ed437e1ebd","type":"point","x":726,"y":161.5},{"id":"4634af93-2b4c-4270-831a-d31a74d21cce","type":"point","x":375.328125,"y":227.5}],"labels":[],"width":3,"color":"gray","curvyness":50,"selectedColor":"rgb(0,192,255)"},"6ee0842c-c92f-47e6-9b7b-6fc2944cb3a9":{"id":"6ee0842c-c92f-47e6-9b7b-6fc2944cb3a9","type":"default","selected":false,"source":"30235114-1447-4791-8bb2-d35880bbc4b1","sourcePort":"8dbcb3f5-fec1-4fad-aaf3-68f3f61cfe81","target":"883d815b-9c5b-49fc-ba7d-a656199e3e74","targetPort":"5f420d9e-4410-4ca3-8349-c92c33b08a4a","points":[{"id":"c979f2eb-c6a1-4c42-88f5-0ac369301e38","type":"point","x":263.5,"y":415.5},{"id":"5d52c0f1-3aad-4bed-8c78-b4472a1e65b2","type":"point","x":357.5,"y":253.5}],"labels":[],"width":3,"color":"gray","curvyness":50,"selectedColor":"rgb(0,192,255)"},"808cdb17-b3e3-4707-b3d5-6c7cbd07e84d":{"id":"808cdb17-b3e3-4707-b3d5-6c7cbd07e84d","type":"default","selected":false,"source":"883d815b-9c5b-49fc-ba7d-a656199e3e74","sourcePort":"550c3c05-110d-45b8-99ae-23bbfe15f596","target":"c3b1b689-2693-4d76-8486-ea124e8c134b","targetPort":"8b69888a-4fd5-4c20-85cc-2f682d0d8fce","points":[{"id":"3a701bec-8302-4fa0-a3b1-54e25c667c88","type":"point","x":393.15625,"y":253.5},{"id":"ded2f886-9ad7-4abe-9774-112a09481f89","type":"point","x":1249.5,"y":416.5}],"labels":[],"width":3,"color":"gray","curvyness":50,"selectedColor":"rgb(0,192,255)"}}},{"id":"9118b48a-26a5-4ebd-a131-3ffb34d7a166","type":"diagram-nodes","isSvg":false,"transformed":true,"models":{"0001-cb1a567b-b8db-4066-91cb-27a697a56d81":{"id":"0001-cb1a567b-b8db-4066-91cb-27a697a56d81","type":"basic.constant","selected":true,"x":664,"y":45,"ports":[{"id":"66a453d3-26fc-49de-8859-19751d184b06","type":"port.output","x":718.5,"y":154,"name":"constant-out","alignment":"bottom","parentNode":"0001-cb1a567b-b8db-4066-91cb-27a697a56d81","links":["094e46b3-bf06-4d7b-95e9-0e29047dd4f8"],"in":false,"label":"constant-out","hideLabel":true}],"data":{"name":"Frequency","value":"15.0","local":true}},"30235114-1447-4791-8bb2-d35880bbc4b1":{"id":"30235114-1447-4791-8bb2-d35880bbc4b1","type":"basic.input","selected":false,"x":170,"y":389,"ports":[{"id":"8dbcb3f5-fec1-4fad-aaf3-68f3f61cfe81","type":"port.output","x":256,"y":408,"name":"input-out","alignment":"right","parentNode":"30235114-1447-4791-8bb2-d35880bbc4b1","links":["6ee0842c-c92f-47e6-9b7b-6fc2944cb3a9"],"in":false,"label":"input-out","hideLabel":true}],"data":{"name":"E"}},"c3b1b689-2693-4d76-8486-ea124e8c134b":{"id":"c3b1b689-2693-4d76-8486-ea124e8c134b","type":"basic.output","selected":false,"x":1241,"y":390,"ports":[{"id":"8b69888a-4fd5-4c20-85cc-2f682d0d8fce","type":"port.input","x":1242,"y":409,"name":"output-in","alignment":"left","parentNode":"c3b1b689-2693-4d76-8486-ea124e8c134b","links":["808cdb17-b3e3-4707-b3d5-6c7cbd07e84d"],"in":true,"label":"output-in","hideLabel":true}],"data":{"name":"Out"}},"883d815b-9c5b-49fc-ba7d-a656199e3e74":{"id":"883d815b-9c5b-49fc-ba7d-a656199e3e74","type":"basic.code","selected":false,"x":349,"y":219,"ports":[{"id":"5f420d9e-4410-4ca3-8349-c92c33b08a4a","type":"port.input","x":350,"y":246,"name":"E","alignment":"left","parentNode":"883d815b-9c5b-49fc-ba7d-a656199e3e74","links":["6ee0842c-c92f-47e6-9b7b-6fc2944cb3a9"],"in":true,"label":"E","hideLabel":false},{"id":"550c3c05-110d-45b8-99ae-23bbfe15f596","type":"port.output","x":385.65625,"y":246,"name":"Out","alignment":"right","parentNode":"883d815b-9c5b-49fc-ba7d-a656199e3e74","links":["808cdb17-b3e3-4707-b3d5-6c7cbd07e84d"],"in":false,"label":"Out","hideLabel":false},{"id":"3ce1d22e-8b1c-4c42-b0a7-0638da6749b2","type":"port.parameter","x":367.828125,"y":220,"name":"Frequency","alignment":"top","parentNode":"883d815b-9c5b-49fc-ba7d-a656199e3e74","links":["094e46b3-bf06-4d7b-95e9-0e29047dd4f8"],"in":true,"label":"Frequency","hideLabel":false}],"data":{"code":"import cv2\r\nimport numpy as np\r\nfrom time import sleep\r\nfrom utils.wires.wire_img import share_image\r\nfrom utils.wires.wire_str import read_string\r\nfrom utils.tools.freq_monitor import monitor_frequency\r\n\r\ndef loop(block_name, input_wires, output_wires, parameters, flags):\r\n\r\n    output_0 = share_image(output_wires[0])\r\n\r\n    enabled = False\r\n    try:\r\n        enable_wire = read_string(input_wires[0])\r\n    except IndexError:\r\n        enabled = True\r\n\r\n    required_frequency, update = float(parameters[0]), 1\r\n    control_data = np.array([0.0,0.03])\r\n\r\n    if flags[0] == 1:\r\n        monitor_frequency(block_name, control_data, required_frequency, update)\r\n\r\n    cap = cv2.VideoCapture(0)\r\n\r\n    try:\r\n    \r\n        while True:\r\n    \r\n            if enabled or (update := bool(enable_wire.get()[0])):\r\n                \r\n                control_data[0] += 1 \r\n                ret, frame = cap.read()\r\n                output_0.add(frame)\r\n                \r\n            sleep(control_data[1])\r\n            \r\n    except KeyboardInterrupt:\r\n    \r\n        cap.release()\r\n        enable_wire.release()\r\n        output_0.release()","params":[{"name":"Frequency"}],"ports":{"in":[{"name":"E"}],"out":[{"name":"Out"}]},"size":{"width":"0px","height":"0px"}}}}}]},"info":{"name":"Camera","version":"1.0.0","description":"Captures Video Stream from Camera","author":"Muhammad Taha Suhail","image":"data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjQ3MnB0IiB2aWV3Qm94PSIwIC04NyA0NzIgNDcyIiB3aWR0aD0iNDcycHQiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0ibTQ2MiAzNS4xMjEwOTR2MjI3LjgyMDMxMmwtMTIxLjg3ODkwNi02Ni41NTA3ODFoLTEuMjEwOTM4di05NC43MTg3NWgxLjIxMDkzOHptMCAwIiBmaWxsPSIjMDBhY2VhIi8+PHBhdGggZD0ibTMzOC45MTAxNTYgMTk2LjM5MDYyNXY1MS4wMzEyNWMwIDIyLjA4OTg0NC0xNy45MTAxNTYgNDAtNDAgNDBoLTI0OC45MTAxNTZjLTIyLjA4OTg0NCAwLTQwLTE3LjkxMDE1Ni00MC00MHYtMTk3LjQyMTg3NWMwLTIyLjA4OTg0NCAxNy45MTAxNTYtNDAgNDAtNDBoMjQ4LjkxMDE1NmMyMi4wODk4NDQgMCA0MCAxNy45MTAxNTYgNDAgNDB6bTAgMCIgZmlsbD0iIzAwZWZkMSIvPjxwYXRoIGQ9Im00NjcuMTAxNTYyIDI2LjUxOTUzMWMtMy4wMzkwNjItMS44MDA3ODEtNi43OTY4NzQtMS44NjcxODctOS44OTg0MzctLjE3NTc4MWwtMTA4LjI5Njg3NSA1OS4xMzI4MTJ2LTM1LjQ3NjU2MmMtLjAzMTI1LTI3LjYwMTU2Mi0yMi4zOTg0MzgtNDkuOTY4NzUtNTAtNTBoLTI0OC45MDYyNWMtMjcuNjAxNTYyLjAzMTI1LTQ5Ljk2ODc1IDIyLjM5ODQzOC01MCA1MHYxOTcuNDIxODc1Yy4wMzEyNSAyNy41OTc2NTYgMjIuMzk4NDM4IDQ5Ljk2NDg0NCA1MCA1MGgyNDguOTEwMTU2YzI3LjYwMTU2My0uMDM1MTU2IDQ5Ljk2ODc1LTIyLjQwMjM0NCA1MC01MHYtMzQuODM5ODQ0bDEwOC4zMDA3ODIgNTkuMTMyODEzYzMuMDk3NjU2IDEuNjkxNDA2IDYuODU1NDY4IDEuNjI1IDkuODkwNjI0LS4xNzU3ODIgMy4wMzUxNTctMS44MDQ2ODcgNC44OTg0MzgtNS4wNzAzMTIgNC44OTg0MzgtOC42MDE1NjJ2LTIyNy44MTY0MDZjMC0zLjUzMTI1LTEuODYzMjgxLTYuODAwNzgyLTQuODk4NDM4LTguNjAxNTYzem0tMTM4LjE5MTQwNiAyMjAuOTAyMzQ0Yy0uMDE5NTMxIDE2LjU1ODU5NC0xMy40Mzc1IDI5Ljk4MDQ2OS0zMCAzMGgtMjQ4LjkxMDE1NmMtMTYuNTYyNS0uMDE5NTMxLTI5Ljk4MDQ2OS0xMy40NDE0MDYtMzAtMzB2LTE5Ny40MjE4NzVjLjAxOTUzMS0xNi41NjI1IDEzLjQzNzUtMjkuOTgwNDY5IDMwLTMwaDI0OC45MTAxNTZjMTYuNTYyNS4wMTk1MzEgMjkuOTgwNDY5IDEzLjQzNzUgMzAgMzB6bTEyMy4wODk4NDQtMS4zMzU5MzctMTAzLjA4OTg0NC01Ni4yODkwNjN2LTgxLjUzMTI1bDEwMy4wODk4NDQtNTYuMjkyOTY5em0wIDAiIGZpbGw9IiMwODM4NjMiLz48L3N2Zz4="},"design":{"board":"Python3-Noetic","graph":{"blocks":[{"id":"0001-cb1a567b-b8db-4066-91cb-27a697a56d81","type":"basic.constant","data":{"name":"Frequency","value":"15.0","local":true},"position":{"x":664,"y":45}},{"id":"30235114-1447-4791-8bb2-d35880bbc4b1","type":"basic.input","data":{"name":"E"},"position":{"x":170,"y":389}},{"id":"c3b1b689-2693-4d76-8486-ea124e8c134b","type":"basic.output","data":{"name":"Out"},"position":{"x":1241,"y":390}},{"id":"883d815b-9c5b-49fc-ba7d-a656199e3e74","type":"basic.code","data":{"code":"import cv2\r\nimport numpy as np\r\nfrom time import sleep\r\nfrom utils.wires.wire_img import share_image\r\nfrom utils.wires.wire_str import read_string\r\nfrom utils.tools.freq_monitor import monitor_frequency\r\n\r\ndef loop(block_name, input_wires, output_wires, parameters, flags):\r\n\r\n    output_0 = share_image(output_wires[0])\r\n\r\n    enabled = False\r\n    try:\r\n        enable_wire = read_string(input_wires[0])\r\n    except IndexError:\r\n        enabled = True\r\n\r\n    required_frequency, update = float(parameters[0]), 1\r\n    control_data = np.array([0.0,0.03])\r\n\r\n    if flags[0] == 1:\r\n        monitor_frequency(block_name, control_data, required_frequency, update)\r\n\r\n    cap = cv2.VideoCapture(0)\r\n\r\n    try:\r\n    \r\n        while True:\r\n    \r\n            if enabled or (update := bool(enable_wire.get()[0])):\r\n                \r\n                control_data[0] += 1 \r\n                ret, frame = cap.read()\r\n                output_0.add(frame)\r\n                \r\n            sleep(control_data[1])\r\n            \r\n    except KeyboardInterrupt:\r\n    \r\n        cap.release()\r\n        enable_wire.release()\r\n        output_0.release()","params":[{"name":"Frequency"}],"ports":{"in":[{"name":"E"}],"out":[{"name":"Out"}]},"size":{"width":"0px","height":"0px"}},"position":{"x":349,"y":219}}],"wires":[{"source":{"block":"0001-cb1a567b-b8db-4066-91cb-27a697a56d81","port":"constant-out"},"target":{"block":"883d815b-9c5b-49fc-ba7d-a656199e3e74","port":"Frequency"}},{"source":{"block":"30235114-1447-4791-8bb2-d35880bbc4b1","port":"input-out"},"target":{"block":"883d815b-9c5b-49fc-ba7d-a656199e3e74","port":"E"}},{"source":{"block":"883d815b-9c5b-49fc-ba7d-a656199e3e74","port":"Out"},"target":{"block":"c3b1b689-2693-4d76-8486-ea124e8c134b","port":"output-in"}}]}}},"b9672fa9-2972-40f4-9513-8614c5a1bbcc":{"id":"b9672fa9-2972-40f4-9513-8614c5a1bbcc","type":"block.package","selected":false,"x":624.0837438423646,"y":76.70443349753695,"ports":[{"id":"71e6c7d0-8c29-4677-963d-f72501ba50a9","type":"port.input","x":625.0781252578643,"y":93.7031261119269,"name":"20935eb2-46d9-4d5b-b3a4-d9ff9f9b7797","alignment":"left","parentNode":"b9672fa9-2972-40f4-9513-8614c5a1bbcc","links":["399ffdc7-961c-44a7-a062-75a1c978e61d"],"in":true,"label":"Img","hideLabel":false},{"id":"3aa238ef-e8aa-4ba4-8179-c10feef07528","type":"port.input","x":625.0781252578643,"y":135.70312340593475,"name":"4c152e4c-d4da-4c9c-a1fa-9cec736c8f03","alignment":"left","parentNode":"b9672fa9-2972-40f4-9513-8614c5a1bbcc","links":[],"in":true,"label":"E","hideLabel":false}],"data":{},"model":{"id":"e19d7fb1-d150-42ea-b195-0e86f8c6ceab","locked":false,"offsetX":1,"offsetY":0,"zoom":100,"gridSize":0,"layers":[{"id":"ef9b9ad3-9b5e-42da-91f1-efe7b3287285","type":"diagram-links","isSvg":true,"transformed":true,"models":{"0d0076f2-b487-4c90-abb9-f0760e025778":{"id":"0d0076f2-b487-4c90-abb9-f0760e025778","type":"default","selected":false,"source":"0001-bf8f67f0-a1b6-4821-9c4d-2e8c9f4b4aac","sourcePort":"96a6c3dc-ee0f-4284-b3bf-72ee3ef21dcf","target":"8a739a4c-9660-4120-a7a5-73fea5344587","targetPort":"aa32b69a-e73f-41b6-b0f4-b1bc9064348f","points":[{"id":"de04ed9f-6d43-4669-829f-c5810210e796","type":"point","x":764,"y":133.5},{"id":"fa574183-cecc-46d9-b83e-aa794c7adc92","type":"point","x":788.546875,"y":198.5}],"labels":[],"width":3,"color":"gray","curvyness":50,"selectedColor":"rgb(0,192,255)"},"ffb34e1c-7aad-4760-8c27-8e84b626cbc5":{"id":"ffb34e1c-7aad-4760-8c27-8e84b626cbc5","type":"default","selected":false,"source":"20935eb2-46d9-4d5b-b3a4-d9ff9f9b7797","sourcePort":"18f023d5-f12b-4756-b243-b4979e0c6382","target":"8a739a4c-9660-4120-a7a5-73fea5344587","targetPort":"d46b9f7a-4a6f-4d04-8209-757b721a609e","points":[{"id":"306c0aa4-bc32-4610-a7d7-cb94078bf413","type":"point","x":363.5,"y":300.5},{"id":"f4677087-445f-4441-8426-b07838122aa5","type":"point","x":447.5,"y":330.5}],"labels":[],"width":3,"color":"gray","curvyness":50,"selectedColor":"rgb(0,192,255)"},"a0cceb49-0b9e-41ef-969d-4e64eaa87fa9":{"id":"a0cceb49-0b9e-41ef-969d-4e64eaa87fa9","type":"default","selected":false,"source":"4c152e4c-d4da-4c9c-a1fa-9cec736c8f03","sourcePort":"614a6476-b37f-4291-a211-a4cd74cb1485","target":"8a739a4c-9660-4120-a7a5-73fea5344587","targetPort":"e47d498b-2e9e-4904-8bea-c896698cc405","points":[{"id":"77f1cb2f-3a7b-4927-b965-660ff69ce321","type":"point","x":369.5,"y":453.5},{"id":"c71ccf7b-7ade-4419-8597-31bb0c6ffb14","type":"point","x":447.5,"y":462.5}],"labels":[],"width":3,"color":"gray","curvyness":50,"selectedColor":"rgb(0,192,255)"}}},{"id":"ea7ae6b0-5833-414e-aa04-860ea2b26529","type":"diagram-nodes","isSvg":false,"transformed":true,"models":{"0001-bf8f67f0-a1b6-4821-9c4d-2e8c9f4b4aac":{"id":"0001-bf8f67f0-a1b6-4821-9c4d-2e8c9f4b4aac","type":"basic.constant","selected":true,"x":702,"y":17,"ports":[{"id":"96a6c3dc-ee0f-4284-b3bf-72ee3ef21dcf","type":"port.output","x":756.5,"y":126,"name":"constant-out","alignment":"bottom","parentNode":"0001-bf8f67f0-a1b6-4821-9c4d-2e8c9f4b4aac","links":["0d0076f2-b487-4c90-abb9-f0760e025778"],"in":false,"label":"constant-out","hideLabel":true}],"data":{"name":"Frequency","value":"15.0","local":true}},"20935eb2-46d9-4d5b-b3a4-d9ff9f9b7797":{"id":"20935eb2-46d9-4d5b-b3a4-d9ff9f9b7797","type":"basic.input","selected":false,"x":270,"y":274,"ports":[{"id":"18f023d5-f12b-4756-b243-b4979e0c6382","type":"port.output","x":356,"y":293,"name":"input-out","alignment":"right","parentNode":"20935eb2-46d9-4d5b-b3a4-d9ff9f9b7797","links":["ffb34e1c-7aad-4760-8c27-8e84b626cbc5"],"in":false,"label":"input-out","hideLabel":true}],"data":{"name":"Img"}},"4c152e4c-d4da-4c9c-a1fa-9cec736c8f03":{"id":"4c152e4c-d4da-4c9c-a1fa-9cec736c8f03","type":"basic.input","selected":false,"x":276,"y":427,"ports":[{"id":"614a6476-b37f-4291-a211-a4cd74cb1485","type":"port.output","x":362,"y":446,"name":"input-out","alignment":"right","parentNode":"4c152e4c-d4da-4c9c-a1fa-9cec736c8f03","links":["a0cceb49-0b9e-41ef-969d-4e64eaa87fa9"],"in":false,"label":"input-out","hideLabel":true}],"data":{"name":"E"}},"8a739a4c-9660-4120-a7a5-73fea5344587":{"id":"8a739a4c-9660-4120-a7a5-73fea5344587","type":"basic.code","selected":false,"x":439,"y":190,"ports":[{"id":"d46b9f7a-4a6f-4d04-8209-757b721a609e","type":"port.input","x":440,"y":323,"name":"Img","alignment":"left","parentNode":"8a739a4c-9660-4120-a7a5-73fea5344587","links":["ffb34e1c-7aad-4760-8c27-8e84b626cbc5"],"in":true,"label":"Img","hideLabel":false},{"id":"e47d498b-2e9e-4904-8bea-c896698cc405","type":"port.input","x":440,"y":455,"name":"E","alignment":"left","parentNode":"8a739a4c-9660-4120-a7a5-73fea5344587","links":["a0cceb49-0b9e-41ef-969d-4e64eaa87fa9"],"in":true,"label":"E","hideLabel":false},{"id":"aa32b69a-e73f-41b6-b0f4-b1bc9064348f","type":"port.parameter","x":781.046875,"y":191,"name":"Frequency","alignment":"top","parentNode":"8a739a4c-9660-4120-a7a5-73fea5344587","links":["0d0076f2-b487-4c90-abb9-f0760e025778"],"in":true,"label":"Frequency","hideLabel":false}],"data":{"code":"import cv2\nimport numpy as np\nfrom time import sleep\nfrom utils.wires.wire_img import read_image\nfrom utils.wires.wire_str import read_string\nfrom utils.tools.freq_monitor import monitor_frequency\n\ndef loop(block_name, input_wires, output_wires, parameters, flags):\n\n    input_0 = read_image(input_wires[0])\n\n    enabled = False\n    try:\n        enable_wire = read_string(input_wires[1])\n    except IndexError:\n        enabled = True\n\n    required_frequency, update = float(parameters[0]), 1\n    control_data = np.array([0.0,0.03])\n\n    if flags[0] == 1:\n        monitor_frequency(block_name, control_data, required_frequency, update)\n\n    try:\n    \n        while True:\n        \n            if enabled or (update := bool(enable_wire.get()[0])):\n        \n                control_data[0] += 1\n                img = input_0.get()\n                \n                if img is not None:\n                    cv2.imshow(block_name, img)\n                    if cv2.waitKey(1) & 0xFF == ord('q'):\n                        break\n\n            sleep(control_data[1])\n\n    except KeyboardInterrupt:\n    \n        input_0.release()\n        enable_wire.release()","params":[{"name":"Frequency"}],"ports":{"in":[{"name":"Img"},{"name":"E"}],"out":[]},"size":{"width":"660px","height":"350px"}}}}}]},"info":{"name":"Screen","version":"1.0.0","description":"Displays Image or Video","author":"Muhammad Taha Suhail","image":"data:image/svg+xml;base64,PHN2ZyBpZD0iQ2FwYV8xIiBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCA1MTIgNTEyIiBoZWlnaHQ9IjUxMiIgdmlld0JveD0iMCAwIDUxMiA1MTIiIHdpZHRoPSI1MTIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGc+PHBhdGggZD0ibTIxMC4yODcgNDA1LjY2N3Y5MS4zMzNoNDUuNzEzbDIwLTQ4LTIwLTQzLjMzM3oiIGZpbGw9IiNiNGQyZDciLz48cGF0aCBkPSJtMjU2IDQwNS42NjdoNDUuNzEzdjkxLjMzM2gtNDUuNzEzeiIgZmlsbD0iIzliYjljMyIvPjxwYXRoIGQ9Im0wIDB2MzU0LjE5bDI1NiAyMCAzMC0xOTcuMDk1LTMwLTE3Ny4wOTV6IiBmaWxsPSIjMDc0ODVlIi8+PGNpcmNsZSBjeD0iMTUwLjQxNiIgY3k9IjIwMi45OCIgZmlsbD0iI2YyYmI4OCIgcj0iNDkuMzQxIi8+PHBhdGggZD0ibTIyMi44ODUgMzY0LjE5aC0xNDQuOTM4di05MS44NjljMC0xMS4wNDYgOC45NTQtMjAgMjAtMjBoMTA0LjkzOGMxMS4wNDYgMCAyMCA4Ljk1NCAyMCAyMHoiIGZpbGw9IiMwMGI2YmQiLz48cGF0aCBkPSJtNTEyIDBoLTI1NnYzNzQuMTlsMjU2LTIweiIgZmlsbD0iIzA0MzAzZSIvPjxwYXRoIGQ9Im0wIDM1NC4xOXY2MS44NjdoMjU2bDIwLTM2LjA1Ny0yMC0yNS44MXoiIGZpbGw9IiNlMWViZjAiLz48cGF0aCBkPSJtMjU2IDM1NC4xOWgyNTZ2NjEuODY3aC0yNTZ6IiBmaWxsPSIjYjRkMmQ3Ii8+PGc+PHBhdGggZD0ibTI1NiA1MTJoLTEyNC43NjZ2LTMwaDEyNC43NjZsMTAgMTV6IiBmaWxsPSIjZTFlYmYwIi8+PC9nPjxnPjxwYXRoIGQ9Im0yNTYgNDgyaDEyNC43NjZ2MzBoLTEyNC43NjZ6IiBmaWxsPSIjYjRkMmQ3Ii8+PC9nPjxwYXRoIGQ9Im0yODkuMTE1IDc1aDE1MXYxMThoLTE1MXoiIGZpbGw9IiM1YTkzYzgiLz48L2c+PC9zdmc+"},"design":{"board":"Python3-Noetic","graph":{"blocks":[{"id":"0001-bf8f67f0-a1b6-4821-9c4d-2e8c9f4b4aac","type":"basic.constant","data":{"name":"Frequency","value":"15.0","local":true},"position":{"x":702,"y":17}},{"id":"20935eb2-46d9-4d5b-b3a4-d9ff9f9b7797","type":"basic.input","data":{"name":"Img"},"position":{"x":270,"y":274}},{"id":"4c152e4c-d4da-4c9c-a1fa-9cec736c8f03","type":"basic.input","data":{"name":"E"},"position":{"x":276,"y":427}},{"id":"8a739a4c-9660-4120-a7a5-73fea5344587","type":"basic.code","data":{"code":"import cv2\nimport numpy as np\nfrom time import sleep\nfrom utils.wires.wire_img import read_image\nfrom utils.wires.wire_str import read_string\nfrom utils.tools.freq_monitor import monitor_frequency\n\ndef loop(block_name, input_wires, output_wires, parameters, flags):\n\n    input_0 = read_image(input_wires[0])\n\n    enabled = False\n    try:\n        enable_wire = read_string(input_wires[1])\n    except IndexError:\n        enabled = True\n\n    required_frequency, update = float(parameters[0]), 1\n    control_data = np.array([0.0,0.03])\n\n    if flags[0] == 1:\n        monitor_frequency(block_name, control_data, required_frequency, update)\n\n    try:\n    \n        while True:\n        \n            if enabled or (update := bool(enable_wire.get()[0])):\n        \n                control_data[0] += 1\n                img = input_0.get()\n                \n                if img is not None:\n                    cv2.imshow(block_name, img)\n                    if cv2.waitKey(1) & 0xFF == ord('q'):\n                        break\n\n            sleep(control_data[1])\n\n    except KeyboardInterrupt:\n    \n        input_0.release()\n        enable_wire.release()","params":[{"name":"Frequency"}],"ports":{"in":[{"name":"Img"},{"name":"E"}],"out":[]},"size":{"width":"660px","height":"350px"}},"position":{"x":439,"y":190}}],"wires":[{"source":{"block":"0001-bf8f67f0-a1b6-4821-9c4d-2e8c9f4b4aac","port":"constant-out"},"target":{"block":"8a739a4c-9660-4120-a7a5-73fea5344587","port":"Frequency"}},{"source":{"block":"20935eb2-46d9-4d5b-b3a4-d9ff9f9b7797","port":"input-out"},"target":{"block":"8a739a4c-9660-4120-a7a5-73fea5344587","port":"Img"}},{"source":{"block":"4c152e4c-d4da-4c9c-a1fa-9cec736c8f03","port":"input-out"},"target":{"block":"8a739a4c-9660-4120-a7a5-73fea5344587","port":"E"}}]}}},"47ea10ba-8ded-41c2-9bbc-f509b88580c9":{"id":"47ea10ba-8ded-41c2-9bbc-f509b88580c9","type":"block.package","selected":false,"x":456.8965517241378,"y":76.35467980295567,"ports":[{"id":"d552e6c6-f74f-4152-a2bb-3a43361e551c","type":"port.input","x":457.8906102245746,"y":93.34374780460317,"name":"d3d4b5d3-103e-493a-b2ef-ed5c67812143","alignment":"left","parentNode":"47ea10ba-8ded-41c2-9bbc-f509b88580c9","links":["fe0bcf86-3631-4a91-a6a7-713fba766e72"],"in":true,"label":"Image","hideLabel":false},{"id":"89258fa6-c102-4ca4-8bfe-009fe57772c8","type":"port.input","x":457.8906102245746,"y":135.3437676485456,"name":"d8120a29-0620-475b-abf0-edbaae6a87a5","alignment":"left","parentNode":"47ea10ba-8ded-41c2-9bbc-f509b88580c9","links":[],"in":true,"label":"Enable","hideLabel":false},{"id":"b06b1848-1daf-4432-9ecc-9700f251b91c","type":"port.output","x":572.8906312711802,"y":114.34375772657438,"name":"9504805d-a10b-4f61-acd4-22b8a48d47a8","alignment":"right","parentNode":"47ea10ba-8ded-41c2-9bbc-f509b88580c9","links":["399ffdc7-961c-44a7-a062-75a1c978e61d"],"in":false,"label":"Output","hideLabel":false}],"data":{},"model":{"id":"79309174-c888-4eb6-9519-ba5d4c52ab0c","locked":true,"offsetX":0,"offsetY":0,"zoom":100,"gridSize":0,"layers":[{"id":"3d2a63ca-828f-4694-8a85-95057ff92811","type":"diagram-links","isSvg":true,"transformed":true,"models":{"69ba4fff-d643-4ea8-a3e5-48208324c9b0":{"id":"69ba4fff-d643-4ea8-a3e5-48208324c9b0","type":"default","selected":false,"source":"9eb1fa61-8f57-42c4-ae29-32ceb1334403","sourcePort":"ab5174bb-33eb-41f3-ad92-81b5572be466","target":"87a0499f-6b87-44d9-af10-b4891f074bf6","targetPort":"1566efef-ea82-49bf-a934-13911e987c03","points":[{"id":"2a81d449-5242-4a75-975f-aa21678ebf83","type":"point","x":700,"y":135.5},{"id":"d6fad354-b32b-40cd-a8da-2bad3ff0586d","type":"point","x":729.515625,"y":211.5}],"labels":[],"width":3,"color":"gray","curvyness":50,"selectedColor":"rgb(0,192,255)"},"e96e8630-353f-46b6-a380-c4d0c35f6dfd":{"id":"e96e8630-353f-46b6-a380-c4d0c35f6dfd","type":"default","selected":false,"source":"d3d4b5d3-103e-493a-b2ef-ed5c67812143","sourcePort":"2fdbe147-d851-4771-8290-6f762f8dab23","target":"87a0499f-6b87-44d9-af10-b4891f074bf6","targetPort":"5ce696b8-efa6-49e2-ab96-160e96e601e8","points":[{"id":"a2f73c6e-cdc0-4a44-8689-f8bbf7c613eb","type":"point","x":217.5,"y":318},{"id":"f25d3858-b5ad-411f-82e5-7ff6882d1838","type":"point","x":330.5,"y":426.5}],"labels":[],"width":3,"color":"gray","curvyness":50,"selectedColor":"rgb(0,192,255)"},"12f6e92c-c9bf-4b9b-b0e1-1e5cacb96799":{"id":"12f6e92c-c9bf-4b9b-b0e1-1e5cacb96799","type":"default","selected":false,"source":"d8120a29-0620-475b-abf0-edbaae6a87a5","sourcePort":"513a160a-9870-43c0-93fc-b0a34eaf7038","target":"87a0499f-6b87-44d9-af10-b4891f074bf6","targetPort":"3d94f395-41f3-40a5-a249-11decaa98644","points":[{"id":"31dcf445-79a8-4f8b-a71a-181d67b2a906","type":"point","x":223.5,"y":472},{"id":"8c6f4271-f436-4077-9aaf-f50aa513673c","type":"point","x":330.5,"y":641.5}],"labels":[],"width":3,"color":"gray","curvyness":50,"selectedColor":"rgb(0,192,255)"},"652e247e-9d51-4b9a-99d9-c8417321c460":{"id":"652e247e-9d51-4b9a-99d9-c8417321c460","type":"default","selected":false,"source":"9504805d-a10b-4f61-acd4-22b8a48d47a8","sourcePort":"e59de652-3334-4e5d-8ac5-d6727e75fb49","target":"87a0499f-6b87-44d9-af10-b4891f074bf6","targetPort":"62b30ffe-627b-4df5-a85d-b2160f0df1a2","points":[{"id":"d007f143-3370-40a6-b45f-dacb5a7364c1","type":"point","x":1164.5,"y":403},{"id":"7a3bd62b-f3c6-4883-882a-9ddb2152baf4","type":"point","x":1128.53125,"y":534}],"labels":[],"width":3,"color":"gray","curvyness":50,"selectedColor":"rgb(0,192,255)"}}},{"id":"a94e2984-54d5-49aa-97b7-23cbce3ccb9a","type":"diagram-nodes","isSvg":false,"transformed":true,"models":{"9eb1fa61-8f57-42c4-ae29-32ceb1334403":{"id":"9eb1fa61-8f57-42c4-ae29-32ceb1334403","type":"basic.constant","selected":false,"x":639,"y":20,"ports":[{"id":"ab5174bb-33eb-41f3-ad92-81b5572be466","type":"port.output","x":692.5,"y":128,"name":"constant-out","alignment":"bottom","parentNode":"9eb1fa61-8f57-42c4-ae29-32ceb1334403","links":["69ba4fff-d643-4ea8-a3e5-48208324c9b0"],"in":false,"label":"constant-out"}],"data":{"name":"Frequency","value":"10.0","local":true}},"87a0499f-6b87-44d9-af10-b4891f074bf6":{"id":"87a0499f-6b87-44d9-af10-b4891f074bf6","type":"basic.code","selected":false,"x":322,"y":203,"ports":[{"id":"5ce696b8-efa6-49e2-ab96-160e96e601e8","type":"port.input","x":323,"y":419,"name":"Input","alignment":"left","parentNode":"87a0499f-6b87-44d9-af10-b4891f074bf6","links":["e96e8630-353f-46b6-a380-c4d0c35f6dfd"],"in":true,"label":"Input"},{"id":"3d94f395-41f3-40a5-a249-11decaa98644","type":"port.input","x":323,"y":634,"name":"Enable","alignment":"left","parentNode":"87a0499f-6b87-44d9-af10-b4891f074bf6","links":["12f6e92c-c9bf-4b9b-b0e1-1e5cacb96799"],"in":true,"label":"Enable"},{"id":"62b30ffe-627b-4df5-a85d-b2160f0df1a2","type":"port.output","x":1121.03125,"y":526.5,"name":"Output","alignment":"right","parentNode":"87a0499f-6b87-44d9-af10-b4891f074bf6","links":["652e247e-9d51-4b9a-99d9-c8417321c460"],"in":false,"label":"Output"},{"id":"1566efef-ea82-49bf-a934-13911e987c03","type":"port.parameter","x":722.015625,"y":204,"name":"Frequency","alignment":"top","parentNode":"87a0499f-6b87-44d9-af10-b4891f074bf6","links":["69ba4fff-d643-4ea8-a3e5-48208324c9b0"],"in":true,"label":"Frequency"}],"data":{"code":"import cv2\nimport time\nimport numpy as np\nfrom time import sleep\nfrom utils.wires.wire_img import share_image, read_image\nfrom utils.wires.wire_str import read_string\nfrom utils.tools.freq_monitor import monitor_frequency\n\nclassName = []\nclassesFile = 'utils/models/yolov3/yolov3.txt'\n\nwith open(classesFile,'rt') as f:\n        className = f.read().rstrip('\\n').split('\\n')\n\ndef findObjects(outputs, img):\n\n    confThreshold = 0.3\n    nmsThreshold = 0.3\n    hT, wT, cT = img.shape\n    bbox = []\n    classIds = []\n    confs = []\n\n    for output in outputs:\n    \n        for det in output:\n            scores = det[5:]\n            classId = np.argmax(scores)\n            confidence = scores[classId]\n            if confidence > confThreshold:\n                w,h = int(det[2] * wT), int(det[3] * hT)\n                x,y = int((det[0]*wT) - w/2), int((det[1]*hT) - h/2)\n                bbox.append([x,y,w,h])\n                classIds.append(classId)\n                confs.append(float(confidence))\n    \n    indices = cv2.dnn.NMSBoxes(bbox, confs, confThreshold, nmsThreshold)\n    for i in indices:\n        #i = i[0]\n        box = bbox[i]\n        x,y,w,h = box[0],box[1],box[2],box[3]\n        cv2.rectangle(img,(x,y),(x+w, y+h),(255,0,255),2)\n        cv2.putText(img,f'{className[classIds[i]].upper()} {int(confs[i]*100)}%',\n                    (x,y-10),cv2.FONT_HERSHEY_SIMPLEX, 0.6, (255,0,255),2)\n                \ndef loop(block_name, input_wires, output_wires, parameters, flags):\n\n    input_0 = read_image(input_wires[0])\n    output_0 = share_image(output_wires[0])\n\n    enabled = False\n    try:\n        enable_wire = read_string(input_wires[1])\n    except IndexError:\n        enabled = True\n    \n    required_frequency, update = float(parameters[0]), 1\n    control_data = np.array([0.0,0.03])\n    \n    if flags[0] == 1:\n        monitor_frequency(block_name, control_data, required_frequency, update)\n    \n    whT = 320\n\n    modelConfiguration = 'utils/models/yolov3/yolov3-tiny.cfg'\n    modelWeights = 'utils/models/yolov3/yolov3-tiny.weights'\n\n    net = cv2.dnn.readNetFromDarknet(modelConfiguration,modelWeights)\n    net.setPreferableBackend(cv2.dnn.DNN_BACKEND_OPENCV)\n    net.setPreferableTarget(cv2.dnn. DNN_TARGET_CPU)\n\n    try:\n    \n        while True:\n        \n            if enabled or (update := bool(enable_wire.get()[0])):\n\n                frame = input_0.get()\n\n                if frame is not None:    \n\n                    #converting img to blob\n                    blob = cv2.dnn.blobFromImage(frame, 1/255,(whT,whT),[0,0,0],1, crop = False)\n            \n                    #Passing blob to network\n                    net.setInput(blob)\n\n                    layerNames = net.getLayerNames()\n                    outputNames = [layerNames[i-1] for i in net.getUnconnectedOutLayers()]\n            \n                    #forward Pass\n                    outputs = net.forward(outputNames)\n                    findObjects(outputs,frame)\n\n                    output_0.add(frame)\n                    control_data[0] += 1\n\n            sleep(control_data[1])\n            \n    except KeyboardInterrupt: \n    \n        input_0.release()\n        enable_wire.release()\n        output_0.release()","params":[{"name":"Frequency"}],"ports":{"in":[{"name":"Input"},{"name":"Enable"}],"out":[{"name":"Output"}]},"size":{"width":"20px","height":"20px"}}},"d3d4b5d3-103e-493a-b2ef-ed5c67812143":{"id":"d3d4b5d3-103e-493a-b2ef-ed5c67812143","type":"basic.input","selected":false,"x":124,"y":297,"ports":[{"id":"2fdbe147-d851-4771-8290-6f762f8dab23","type":"port.output","x":210,"y":310.5,"name":"input-out","alignment":"right","parentNode":"d3d4b5d3-103e-493a-b2ef-ed5c67812143","links":["e96e8630-353f-46b6-a380-c4d0c35f6dfd"],"in":false,"label":"input-out"}],"data":{"name":"Image"}},"d8120a29-0620-475b-abf0-edbaae6a87a5":{"id":"d8120a29-0620-475b-abf0-edbaae6a87a5","type":"basic.input","selected":false,"x":130,"y":451,"ports":[{"id":"513a160a-9870-43c0-93fc-b0a34eaf7038","type":"port.output","x":216,"y":464.5,"name":"input-out","alignment":"right","parentNode":"d8120a29-0620-475b-abf0-edbaae6a87a5","links":["12f6e92c-c9bf-4b9b-b0e1-1e5cacb96799"],"in":false,"label":"input-out"}],"data":{"name":"Enable"}},"9504805d-a10b-4f61-acd4-22b8a48d47a8":{"id":"9504805d-a10b-4f61-acd4-22b8a48d47a8","type":"basic.output","selected":false,"x":1156,"y":382,"ports":[{"id":"e59de652-3334-4e5d-8ac5-d6727e75fb49","type":"port.input","x":1157,"y":395.5,"name":"output-in","alignment":"left","parentNode":"9504805d-a10b-4f61-acd4-22b8a48d47a8","links":["652e247e-9d51-4b9a-99d9-c8417321c460"],"in":true,"label":"output-in"}],"data":{"name":"Output"}}}}]},"info":{"name":"ObjectDetector","version":"1.0.0","description":"Detects Objects in an Image","author":"Faizan Ahmed","image":"data:image/svg+xml;base64,PHN2ZyBpZD0iQ2FwYV8xIiBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCA1MTAgNTEwIiBoZWlnaHQ9IjUxMiIgdmlld0JveD0iMCAwIDUxMCA1MTAiIHdpZHRoPSI1MTIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgaWQ9IlhNTElEXzI3MF8iPjxwYXRoIGlkPSJYTUxJRF8zOTdfIiBkPSJtMjQwIDB2NzUuNjJsNy41IDYuMjk3IDcuNS02LjkxNyAzLjY3My0zNi4xMDYtMy42NzMtMzguODk0Yy01LjI0NiAwLTkuNzU0IDAtMTUgMHoiIGZpbGw9IiNlNjM5NTAiLz48cGF0aCBpZD0iWE1MSURfMzYxXyIgZD0ibTI3MCAwYy01LjI0NiAwLTkuNzU0IDAtMTUgMHY3NWw3LjUgNi45MTYgNy41LTYuMjk3YzAtMTguOTg5IDAtNjMuNDM2IDAtNzUuNjE5eiIgZmlsbD0iI2NkMDAwMCIvPjxwYXRoIGlkPSJYTUxJRF8zNThfIiBkPSJtMjQwIDQzNC4zNzh2NzUuNjIyaDE1bDUuODMzLTM1LjMzMy01LjgzMy0zOS42NjctNy41LTcuNjY3eiIgZmlsbD0iI2U2Mzk1MCIvPjxwYXRoIGlkPSJYTUxJRF8zNTVfIiBkPSJtMjcwIDQzNC4zNzgtNy41LTcuMDQ1LTcuNSA3LjY2N3Y3NWgxNWMwLTEyLjAwOSAwLTU2LjYzMiAwLTc1LjYyMnoiIGZpbGw9IiNjZDAwMDAiLz48cGF0aCBpZD0iWE1MSURfMzUyXyIgZD0ibTQzNC4zODEgMjcwaDc1LjYxOWMwLTEwLjQ5MiAwLTE5LjUwOCAwLTMwLTEyLjAwOSAwLTU2LjYyOSAwLTc1LjYxOSAwbC0xNC4zODEgMTV6IiBmaWxsPSIjY2QwMDAwIi8+PHBhdGggaWQ9IlhNTElEXzM0OV8iIGQ9Im03NS42MjIgMjcwYy0xOC45OSAwLTYzLjQzOSAwLTc1LjYyMiAwIDAtMTAuNDkyIDAtMTkuNTA4IDAtMzBoNzUuNjIxbDE0LjM3OSAxNXoiIGZpbGw9IiNlNjM5NTAiLz48cGF0aCBpZD0iWE1MSURfMzQ1XyIgZD0ibTc1IDI1NWMwIDk5LjI1IDgwLjc0NSAxODAgMTgwIDE4MGwxNS0xODAtMTUtMTgwYy05OS4yNSAwLTE4MCA4MC43NDUtMTgwIDE4MHoiIGZpbGw9IiNmZjYzN2IiLz48cGF0aCBpZD0iWE1MSURfMzQyXyIgZD0ibTQzNSAyNTVjMC05OS4yNDktODAuNzQ1LTE4MC0xODAtMTgwdjM2MGM5OS4yNDkgMCAxODAtODAuNzQ1IDE4MC0xODB6IiBmaWxsPSIjZTYzOTUwIi8+PHBhdGggaWQ9IlhNTElEXzMyN18iIGQ9Im0xMDUgMjU1YzAgODIuNzA3IDY3LjI4NyAxNTAgMTUwIDE1MGwxNS0xNTAtMTUtMTUwYy04Mi43MDggMC0xNTAgNjcuMjg3LTE1MCAxNTB6IiBmaWxsPSIjZTZmMmZmIi8+PHBhdGggaWQ9IlhNTElEXzMyM18iIGQ9Im00MDUgMjU1YzAtODIuNzA4LTY3LjI4Ny0xNTAtMTUwLTE1MHYzMDBjODIuNzA3IDAgMTUwLTY3LjI4OCAxNTAtMTUweiIgZmlsbD0iI2NkZiIvPjxwYXRoIGlkPSJYTUxJRF8zMjBfIiBkPSJtNDgwIDMwdjkwaDMwYzAtMTQuNTE4IDAtMTA1LjM4NiAwLTEyMC0xNC41MTggMC0xMDUuMzg2IDAtMTIwIDB2MzB6IiBmaWxsPSIjY2RmIi8+PHBhdGggaWQ9IlhNTElEXzMxNV8iIGQ9Im0zMCAxMjBjLTEwLjQ5MiAwLTE5LjUwOCAwLTMwIDAgMC0xNC41MTggMC0xMDUuMzg2IDAtMTIwaDEyMHYzMGMtMTAuODg5IDAtNzkuMDQgMC05MCAweiIgZmlsbD0iI2U2ZjJmZiIvPjxwYXRoIGlkPSJYTUxJRF8zMTJfIiBkPSJtNDgwIDQ4MGMtMTAuODg5IDAtNzkuMDQgMC05MCAwdjMwaDEyMGMwLTE0LjUxOCAwLTEwNS4zODYgMC0xMjAtMTAuNDkyIDAtMTkuNTA4IDAtMzAgMHoiIGZpbGw9IiNjZGYiLz48cGF0aCBpZD0iWE1MSURfMzA5XyIgZD0ibTEyMCA1MTBjLTE0LjUxOCAwLTEwNS4zODYgMC0xMjAgMCAwLTE0LjUxOCAwLTEwNS4zODYgMC0xMjBoMzB2OTBoOTB6IiBmaWxsPSIjZTZmMmZmIi8+PHBhdGggaWQ9IlhNTElEXzMwMF8iIGQ9Im0yMTMuNjc3IDIzNC44MjRjLTE0LjUwNSA3LjIwNi0yNC43NDYgMTYuNzItMzEuOTU0IDI2LjIwMi0xNC4zNzkgMTguOTE0LTE2LjY5MSAzNy42OTgtMTYuNzIzIDM3Ljc2NnYzMS4yMDhoOTBsMTUtMzcuNTAxLTE1LTM3LjUwMXoiIGZpbGw9IiM2Y2YiLz48cGF0aCBpZD0iWE1MSURfMjk2XyIgZD0ibTM0NSAyOTguNzkyYy0uMTAzLS4yMjQtMi4wMzQtMTguOTI3LTE2LjU1NS0zNy44NzEtNy4xODgtOS4zNzctMTcuNDYtMTguODEzLTMyLjEyMi0yNi4wOTZsLTQxLjMyMyAyMC4xNzN2MzcuNTAxIDM3LjUwMWg5MGMwLTEwLjkxNSAwLTIwLjI5MyAwLTMxLjIwOHoiIGZpbGw9IiM0NTk2ZTYiLz48cGF0aCBpZD0iWE1MSURfMjkyXyIgZD0ibTIwMi41IDIwMi41YzAgMjguOTQ4IDIzLjU1IDUyLjUgNTIuNSA1Mi41bDE1LTUyLjUtMTUtNTIuNWMtMjguOTQ4IDAtNTIuNSAyMy41NS01Mi41IDUyLjV6IiBmaWxsPSIjZmRjIi8+PHBhdGggaWQ9IlhNTElEXzI4N18iIGQ9Im0zMDcuNSAyMDIuNWMwLTI4Ljk0Ny0yMy41NS01Mi41LTUyLjUtNTIuNXYxMDVjMjguOTQ3IDAgNTIuNS0yMy41NSA1Mi41LTUyLjV6IiBmaWxsPSIjZmZiZmIzIi8+PC9nPjwvc3ZnPg=="},"design":{"board":"Python3-Noetic","graph":{"blocks":[{"id":"9eb1fa61-8f57-42c4-ae29-32ceb1334403","type":"basic.constant","data":{"name":"Frequency","value":"10.0","local":true},"position":{"x":639,"y":20}},{"id":"87a0499f-6b87-44d9-af10-b4891f074bf6","type":"basic.code","data":{"code":"import cv2\nimport time\nimport numpy as np\nfrom time import sleep\nfrom utils.wires.wire_img import share_image, read_image\nfrom utils.wires.wire_str import read_string\nfrom utils.tools.freq_monitor import monitor_frequency\n\nclassName = []\nclassesFile = 'utils/models/yolov3/yolov3.txt'\n\nwith open(classesFile,'rt') as f:\n        className = f.read().rstrip('\\n').split('\\n')\n\ndef findObjects(outputs, img):\n\n    confThreshold = 0.3\n    nmsThreshold = 0.3\n    hT, wT, cT = img.shape\n    bbox = []\n    classIds = []\n    confs = []\n\n    for output in outputs:\n    \n        for det in output:\n            scores = det[5:]\n            classId = np.argmax(scores)\n            confidence = scores[classId]\n            if confidence > confThreshold:\n                w,h = int(det[2] * wT), int(det[3] * hT)\n                x,y = int((det[0]*wT) - w/2), int((det[1]*hT) - h/2)\n                bbox.append([x,y,w,h])\n                classIds.append(classId)\n                confs.append(float(confidence))\n    \n    indices = cv2.dnn.NMSBoxes(bbox, confs, confThreshold, nmsThreshold)\n    for i in indices:\n        #i = i[0]\n        box = bbox[i]\n        x,y,w,h = box[0],box[1],box[2],box[3]\n        cv2.rectangle(img,(x,y),(x+w, y+h),(255,0,255),2)\n        cv2.putText(img,f'{className[classIds[i]].upper()} {int(confs[i]*100)}%',\n                    (x,y-10),cv2.FONT_HERSHEY_SIMPLEX, 0.6, (255,0,255),2)\n                \ndef loop(block_name, input_wires, output_wires, parameters, flags):\n\n    input_0 = read_image(input_wires[0])\n    output_0 = share_image(output_wires[0])\n\n    enabled = False\n    try:\n        enable_wire = read_string(input_wires[1])\n    except IndexError:\n        enabled = True\n    \n    required_frequency, update = float(parameters[0]), 1\n    control_data = np.array([0.0,0.03])\n    \n    if flags[0] == 1:\n        monitor_frequency(block_name, control_data, required_frequency, update)\n    \n    whT = 320\n\n    modelConfiguration = 'utils/models/yolov3/yolov3-tiny.cfg'\n    modelWeights = 'utils/models/yolov3/yolov3-tiny.weights'\n\n    net = cv2.dnn.readNetFromDarknet(modelConfiguration,modelWeights)\n    net.setPreferableBackend(cv2.dnn.DNN_BACKEND_OPENCV)\n    net.setPreferableTarget(cv2.dnn. DNN_TARGET_CPU)\n\n    try:\n    \n        while True:\n        \n            if enabled or (update := bool(enable_wire.get()[0])):\n\n                frame = input_0.get()\n\n                if frame is not None:    \n\n                    #converting img to blob\n                    blob = cv2.dnn.blobFromImage(frame, 1/255,(whT,whT),[0,0,0],1, crop = False)\n            \n                    #Passing blob to network\n                    net.setInput(blob)\n\n                    layerNames = net.getLayerNames()\n                    outputNames = [layerNames[i-1] for i in net.getUnconnectedOutLayers()]\n            \n                    #forward Pass\n                    outputs = net.forward(outputNames)\n                    findObjects(outputs,frame)\n\n                    output_0.add(frame)\n                    control_data[0] += 1\n\n            sleep(control_data[1])\n            \n    except KeyboardInterrupt: \n    \n        input_0.release()\n        enable_wire.release()\n        output_0.release()","params":[{"name":"Frequency"}],"ports":{"in":[{"name":"Input"},{"name":"Enable"}],"out":[{"name":"Output"}]},"size":{"width":"20px","height":"20px"}},"position":{"x":322,"y":203}},{"id":"d3d4b5d3-103e-493a-b2ef-ed5c67812143","type":"basic.input","data":{"name":"Image"},"position":{"x":124,"y":297}},{"id":"d8120a29-0620-475b-abf0-edbaae6a87a5","type":"basic.input","data":{"name":"Enable"},"position":{"x":130,"y":451}},{"id":"9504805d-a10b-4f61-acd4-22b8a48d47a8","type":"basic.output","data":{"name":"Output"},"position":{"x":1156,"y":382}}],"wires":[{"source":{"block":"9eb1fa61-8f57-42c4-ae29-32ceb1334403","port":"constant-out"},"target":{"block":"87a0499f-6b87-44d9-af10-b4891f074bf6","port":"Frequency"}},{"source":{"block":"d3d4b5d3-103e-493a-b2ef-ed5c67812143","port":"input-out"},"target":{"block":"87a0499f-6b87-44d9-af10-b4891f074bf6","port":"Input"}},{"source":{"block":"d8120a29-0620-475b-abf0-edbaae6a87a5","port":"input-out"},"target":{"block":"87a0499f-6b87-44d9-af10-b4891f074bf6","port":"Enable"}},{"source":{"block":"87a0499f-6b87-44d9-af10-b4891f074bf6","port":"Output"},"target":{"block":"9504805d-a10b-4f61-acd4-22b8a48d47a8","port":"output-in"}}]}}}}}]},"version":"3.0","package":{"name":"","version":"","description":"","author":"","image":""},"design":{"board":"Python3-Noetic","graph":{"blocks":[{"id":"0d219e52-cc76-4bfa-a257-6eb3837bf5e6","type":"pZ7lGmodpRJN7G0Zy138NdBgEIlVCYIVy3mi7pUV","data":{},"position":{"x":269.2118226600985,"y":74.13793103448276}},{"id":"b9672fa9-2972-40f4-9513-8614c5a1bbcc","type":"feukSeXzVtexPVFQHLHgCTOFa9HIrJ8KDWLuLrl8","data":{},"position":{"x":624.0837438423646,"y":76.70443349753695}},{"id":"47ea10ba-8ded-41c2-9bbc-f509b88580c9","type":"PaGAJjHd57zVksMX1m9wshtLH16MyMurAtMdYZFD","data":{},"position":{"x":456.8965517241378,"y":76.35467980295567}}],"wires":[{"source":{"block":"0d219e52-cc76-4bfa-a257-6eb3837bf5e6","port":"c3b1b689-2693-4d76-8486-ea124e8c134b"},"target":{"block":"47ea10ba-8ded-41c2-9bbc-f509b88580c9","port":"d3d4b5d3-103e-493a-b2ef-ed5c67812143"}},{"source":{"block":"47ea10ba-8ded-41c2-9bbc-f509b88580c9","port":"9504805d-a10b-4f61-acd4-22b8a48d47a8"},"target":{"block":"b9672fa9-2972-40f4-9513-8614c5a1bbcc","port":"20935eb2-46d9-4d5b-b3a4-d9ff9f9b7797"}}]}},"dependencies":{"pZ7lGmodpRJN7G0Zy138NdBgEIlVCYIVy3mi7pUV":{"package":{"name":"Camera","version":"1.0.0","description":"Captures Video Stream from Camera","author":"Muhammad Taha Suhail","image":"data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjQ3MnB0IiB2aWV3Qm94PSIwIC04NyA0NzIgNDcyIiB3aWR0aD0iNDcycHQiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0ibTQ2MiAzNS4xMjEwOTR2MjI3LjgyMDMxMmwtMTIxLjg3ODkwNi02Ni41NTA3ODFoLTEuMjEwOTM4di05NC43MTg3NWgxLjIxMDkzOHptMCAwIiBmaWxsPSIjMDBhY2VhIi8+PHBhdGggZD0ibTMzOC45MTAxNTYgMTk2LjM5MDYyNXY1MS4wMzEyNWMwIDIyLjA4OTg0NC0xNy45MTAxNTYgNDAtNDAgNDBoLTI0OC45MTAxNTZjLTIyLjA4OTg0NCAwLTQwLTE3LjkxMDE1Ni00MC00MHYtMTk3LjQyMTg3NWMwLTIyLjA4OTg0NCAxNy45MTAxNTYtNDAgNDAtNDBoMjQ4LjkxMDE1NmMyMi4wODk4NDQgMCA0MCAxNy45MTAxNTYgNDAgNDB6bTAgMCIgZmlsbD0iIzAwZWZkMSIvPjxwYXRoIGQ9Im00NjcuMTAxNTYyIDI2LjUxOTUzMWMtMy4wMzkwNjItMS44MDA3ODEtNi43OTY4NzQtMS44NjcxODctOS44OTg0MzctLjE3NTc4MWwtMTA4LjI5Njg3NSA1OS4xMzI4MTJ2LTM1LjQ3NjU2MmMtLjAzMTI1LTI3LjYwMTU2Mi0yMi4zOTg0MzgtNDkuOTY4NzUtNTAtNTBoLTI0OC45MDYyNWMtMjcuNjAxNTYyLjAzMTI1LTQ5Ljk2ODc1IDIyLjM5ODQzOC01MCA1MHYxOTcuNDIxODc1Yy4wMzEyNSAyNy41OTc2NTYgMjIuMzk4NDM4IDQ5Ljk2NDg0NCA1MCA1MGgyNDguOTEwMTU2YzI3LjYwMTU2My0uMDM1MTU2IDQ5Ljk2ODc1LTIyLjQwMjM0NCA1MC01MHYtMzQuODM5ODQ0bDEwOC4zMDA3ODIgNTkuMTMyODEzYzMuMDk3NjU2IDEuNjkxNDA2IDYuODU1NDY4IDEuNjI1IDkuODkwNjI0LS4xNzU3ODIgMy4wMzUxNTctMS44MDQ2ODcgNC44OTg0MzgtNS4wNzAzMTIgNC44OTg0MzgtOC42MDE1NjJ2LTIyNy44MTY0MDZjMC0zLjUzMTI1LTEuODYzMjgxLTYuODAwNzgyLTQuODk4NDM4LTguNjAxNTYzem0tMTM4LjE5MTQwNiAyMjAuOTAyMzQ0Yy0uMDE5NTMxIDE2LjU1ODU5NC0xMy40Mzc1IDI5Ljk4MDQ2OS0zMCAzMGgtMjQ4LjkxMDE1NmMtMTYuNTYyNS0uMDE5NTMxLTI5Ljk4MDQ2OS0xMy40NDE0MDYtMzAtMzB2LTE5Ny40MjE4NzVjLjAxOTUzMS0xNi41NjI1IDEzLjQzNzUtMjkuOTgwNDY5IDMwLTMwaDI0OC45MTAxNTZjMTYuNTYyNS4wMTk1MzEgMjkuOTgwNDY5IDEzLjQzNzUgMzAgMzB6bTEyMy4wODk4NDQtMS4zMzU5MzctMTAzLjA4OTg0NC01Ni4yODkwNjN2LTgxLjUzMTI1bDEwMy4wODk4NDQtNTYuMjkyOTY5em0wIDAiIGZpbGw9IiMwODM4NjMiLz48L3N2Zz4="},"design":{"board":"Python3-Noetic","graph":{"blocks":[{"id":"0001-cb1a567b-b8db-4066-91cb-27a697a56d81","type":"basic.constant","data":{"name":"Frequency","value":"15.0","local":true},"position":{"x":664,"y":45}},{"id":"30235114-1447-4791-8bb2-d35880bbc4b1","type":"basic.input","data":{"name":"E"},"position":{"x":170,"y":389}},{"id":"c3b1b689-2693-4d76-8486-ea124e8c134b","type":"basic.output","data":{"name":"Out"},"position":{"x":1241,"y":390}},{"id":"883d815b-9c5b-49fc-ba7d-a656199e3e74","type":"basic.code","data":{"code":"import cv2\r\nimport numpy as np\r\nfrom time import sleep\r\nfrom utils.wires.wire_img import share_image\r\nfrom utils.wires.wire_str import read_string\r\nfrom utils.tools.freq_monitor import monitor_frequency\r\n\r\ndef loop(block_name, input_wires, output_wires, parameters, flags):\r\n\r\n    output_0 = share_image(output_wires[0])\r\n\r\n    enabled = False\r\n    try:\r\n        enable_wire = read_string(input_wires[0])\r\n    except IndexError:\r\n        enabled = True\r\n\r\n    required_frequency, update = float(parameters[0]), 1\r\n    control_data = np.array([0.0,0.03])\r\n\r\n    if flags[0] == 1:\r\n        monitor_frequency(block_name, control_data, required_frequency, update)\r\n\r\n    cap = cv2.VideoCapture(0)\r\n\r\n    try:\r\n    \r\n        while True:\r\n    \r\n            if enabled or (update := bool(enable_wire.get()[0])):\r\n                \r\n                control_data[0] += 1 \r\n                ret, frame = cap.read()\r\n                output_0.add(frame)\r\n                \r\n            sleep(control_data[1])\r\n            \r\n    except KeyboardInterrupt:\r\n    \r\n        cap.release()\r\n        enable_wire.release()\r\n        output_0.release()","params":[{"name":"Frequency"}],"ports":{"in":[{"name":"E"}],"out":[{"name":"Out"}]},"size":{"width":"0px","height":"0px"}},"position":{"x":349,"y":219}}],"wires":[{"source":{"block":"0001-cb1a567b-b8db-4066-91cb-27a697a56d81","port":"constant-out"},"target":{"block":"883d815b-9c5b-49fc-ba7d-a656199e3e74","port":"Frequency"}},{"source":{"block":"30235114-1447-4791-8bb2-d35880bbc4b1","port":"input-out"},"target":{"block":"883d815b-9c5b-49fc-ba7d-a656199e3e74","port":"E"}},{"source":{"block":"883d815b-9c5b-49fc-ba7d-a656199e3e74","port":"Out"},"target":{"block":"c3b1b689-2693-4d76-8486-ea124e8c134b","port":"output-in"}}]}}},"feukSeXzVtexPVFQHLHgCTOFa9HIrJ8KDWLuLrl8":{"package":{"name":"Screen","version":"1.0.0","description":"Displays Image or Video","author":"Muhammad Taha Suhail","image":"data:image/svg+xml;base64,PHN2ZyBpZD0iQ2FwYV8xIiBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCA1MTIgNTEyIiBoZWlnaHQ9IjUxMiIgdmlld0JveD0iMCAwIDUxMiA1MTIiIHdpZHRoPSI1MTIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGc+PHBhdGggZD0ibTIxMC4yODcgNDA1LjY2N3Y5MS4zMzNoNDUuNzEzbDIwLTQ4LTIwLTQzLjMzM3oiIGZpbGw9IiNiNGQyZDciLz48cGF0aCBkPSJtMjU2IDQwNS42NjdoNDUuNzEzdjkxLjMzM2gtNDUuNzEzeiIgZmlsbD0iIzliYjljMyIvPjxwYXRoIGQ9Im0wIDB2MzU0LjE5bDI1NiAyMCAzMC0xOTcuMDk1LTMwLTE3Ny4wOTV6IiBmaWxsPSIjMDc0ODVlIi8+PGNpcmNsZSBjeD0iMTUwLjQxNiIgY3k9IjIwMi45OCIgZmlsbD0iI2YyYmI4OCIgcj0iNDkuMzQxIi8+PHBhdGggZD0ibTIyMi44ODUgMzY0LjE5aC0xNDQuOTM4di05MS44NjljMC0xMS4wNDYgOC45NTQtMjAgMjAtMjBoMTA0LjkzOGMxMS4wNDYgMCAyMCA4Ljk1NCAyMCAyMHoiIGZpbGw9IiMwMGI2YmQiLz48cGF0aCBkPSJtNTEyIDBoLTI1NnYzNzQuMTlsMjU2LTIweiIgZmlsbD0iIzA0MzAzZSIvPjxwYXRoIGQ9Im0wIDM1NC4xOXY2MS44NjdoMjU2bDIwLTM2LjA1Ny0yMC0yNS44MXoiIGZpbGw9IiNlMWViZjAiLz48cGF0aCBkPSJtMjU2IDM1NC4xOWgyNTZ2NjEuODY3aC0yNTZ6IiBmaWxsPSIjYjRkMmQ3Ii8+PGc+PHBhdGggZD0ibTI1NiA1MTJoLTEyNC43NjZ2LTMwaDEyNC43NjZsMTAgMTV6IiBmaWxsPSIjZTFlYmYwIi8+PC9nPjxnPjxwYXRoIGQ9Im0yNTYgNDgyaDEyNC43NjZ2MzBoLTEyNC43NjZ6IiBmaWxsPSIjYjRkMmQ3Ii8+PC9nPjxwYXRoIGQ9Im0yODkuMTE1IDc1aDE1MXYxMThoLTE1MXoiIGZpbGw9IiM1YTkzYzgiLz48L2c+PC9zdmc+"},"design":{"board":"Python3-Noetic","graph":{"blocks":[{"id":"0001-bf8f67f0-a1b6-4821-9c4d-2e8c9f4b4aac","type":"basic.constant","data":{"name":"Frequency","value":"15.0","local":true},"position":{"x":702,"y":17}},{"id":"20935eb2-46d9-4d5b-b3a4-d9ff9f9b7797","type":"basic.input","data":{"name":"Img"},"position":{"x":270,"y":274}},{"id":"4c152e4c-d4da-4c9c-a1fa-9cec736c8f03","type":"basic.input","data":{"name":"E"},"position":{"x":276,"y":427}},{"id":"8a739a4c-9660-4120-a7a5-73fea5344587","type":"basic.code","data":{"code":"import cv2\nimport numpy as np\nfrom time import sleep\nfrom utils.wires.wire_img import read_image\nfrom utils.wires.wire_str import read_string\nfrom utils.tools.freq_monitor import monitor_frequency\n\ndef loop(block_name, input_wires, output_wires, parameters, flags):\n\n    input_0 = read_image(input_wires[0])\n\n    enabled = False\n    try:\n        enable_wire = read_string(input_wires[1])\n    except IndexError:\n        enabled = True\n\n    required_frequency, update = float(parameters[0]), 1\n    control_data = np.array([0.0,0.03])\n\n    if flags[0] == 1:\n        monitor_frequency(block_name, control_data, required_frequency, update)\n\n    try:\n    \n        while True:\n        \n            if enabled or (update := bool(enable_wire.get()[0])):\n        \n                control_data[0] += 1\n                img = input_0.get()\n                \n                if img is not None:\n                    cv2.imshow(block_name, img)\n                    if cv2.waitKey(1) & 0xFF == ord('q'):\n                        break\n\n            sleep(control_data[1])\n\n    except KeyboardInterrupt:\n    \n        input_0.release()\n        enable_wire.release()","params":[{"name":"Frequency"}],"ports":{"in":[{"name":"Img"},{"name":"E"}],"out":[]},"size":{"width":"660px","height":"350px"}},"position":{"x":439,"y":190}}],"wires":[{"source":{"block":"0001-bf8f67f0-a1b6-4821-9c4d-2e8c9f4b4aac","port":"constant-out"},"target":{"block":"8a739a4c-9660-4120-a7a5-73fea5344587","port":"Frequency"}},{"source":{"block":"20935eb2-46d9-4d5b-b3a4-d9ff9f9b7797","port":"input-out"},"target":{"block":"8a739a4c-9660-4120-a7a5-73fea5344587","port":"Img"}},{"source":{"block":"4c152e4c-d4da-4c9c-a1fa-9cec736c8f03","port":"input-out"},"target":{"block":"8a739a4c-9660-4120-a7a5-73fea5344587","port":"E"}}]}}},"PaGAJjHd57zVksMX1m9wshtLH16MyMurAtMdYZFD":{"package":{"name":"ObjectDetector","version":"1.0.0","description":"Detects Objects in an Image","author":"Faizan Ahmed","image":"data:image/svg+xml;base64,PHN2ZyBpZD0iQ2FwYV8xIiBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCA1MTAgNTEwIiBoZWlnaHQ9IjUxMiIgdmlld0JveD0iMCAwIDUxMCA1MTAiIHdpZHRoPSI1MTIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgaWQ9IlhNTElEXzI3MF8iPjxwYXRoIGlkPSJYTUxJRF8zOTdfIiBkPSJtMjQwIDB2NzUuNjJsNy41IDYuMjk3IDcuNS02LjkxNyAzLjY3My0zNi4xMDYtMy42NzMtMzguODk0Yy01LjI0NiAwLTkuNzU0IDAtMTUgMHoiIGZpbGw9IiNlNjM5NTAiLz48cGF0aCBpZD0iWE1MSURfMzYxXyIgZD0ibTI3MCAwYy01LjI0NiAwLTkuNzU0IDAtMTUgMHY3NWw3LjUgNi45MTYgNy41LTYuMjk3YzAtMTguOTg5IDAtNjMuNDM2IDAtNzUuNjE5eiIgZmlsbD0iI2NkMDAwMCIvPjxwYXRoIGlkPSJYTUxJRF8zNThfIiBkPSJtMjQwIDQzNC4zNzh2NzUuNjIyaDE1bDUuODMzLTM1LjMzMy01LjgzMy0zOS42NjctNy41LTcuNjY3eiIgZmlsbD0iI2U2Mzk1MCIvPjxwYXRoIGlkPSJYTUxJRF8zNTVfIiBkPSJtMjcwIDQzNC4zNzgtNy41LTcuMDQ1LTcuNSA3LjY2N3Y3NWgxNWMwLTEyLjAwOSAwLTU2LjYzMiAwLTc1LjYyMnoiIGZpbGw9IiNjZDAwMDAiLz48cGF0aCBpZD0iWE1MSURfMzUyXyIgZD0ibTQzNC4zODEgMjcwaDc1LjYxOWMwLTEwLjQ5MiAwLTE5LjUwOCAwLTMwLTEyLjAwOSAwLTU2LjYyOSAwLTc1LjYxOSAwbC0xNC4zODEgMTV6IiBmaWxsPSIjY2QwMDAwIi8+PHBhdGggaWQ9IlhNTElEXzM0OV8iIGQ9Im03NS42MjIgMjcwYy0xOC45OSAwLTYzLjQzOSAwLTc1LjYyMiAwIDAtMTAuNDkyIDAtMTkuNTA4IDAtMzBoNzUuNjIxbDE0LjM3OSAxNXoiIGZpbGw9IiNlNjM5NTAiLz48cGF0aCBpZD0iWE1MSURfMzQ1XyIgZD0ibTc1IDI1NWMwIDk5LjI1IDgwLjc0NSAxODAgMTgwIDE4MGwxNS0xODAtMTUtMTgwYy05OS4yNSAwLTE4MCA4MC43NDUtMTgwIDE4MHoiIGZpbGw9IiNmZjYzN2IiLz48cGF0aCBpZD0iWE1MSURfMzQyXyIgZD0ibTQzNSAyNTVjMC05OS4yNDktODAuNzQ1LTE4MC0xODAtMTgwdjM2MGM5OS4yNDkgMCAxODAtODAuNzQ1IDE4MC0xODB6IiBmaWxsPSIjZTYzOTUwIi8+PHBhdGggaWQ9IlhNTElEXzMyN18iIGQ9Im0xMDUgMjU1YzAgODIuNzA3IDY3LjI4NyAxNTAgMTUwIDE1MGwxNS0xNTAtMTUtMTUwYy04Mi43MDggMC0xNTAgNjcuMjg3LTE1MCAxNTB6IiBmaWxsPSIjZTZmMmZmIi8+PHBhdGggaWQ9IlhNTElEXzMyM18iIGQ9Im00MDUgMjU1YzAtODIuNzA4LTY3LjI4Ny0xNTAtMTUwLTE1MHYzMDBjODIuNzA3IDAgMTUwLTY3LjI4OCAxNTAtMTUweiIgZmlsbD0iI2NkZiIvPjxwYXRoIGlkPSJYTUxJRF8zMjBfIiBkPSJtNDgwIDMwdjkwaDMwYzAtMTQuNTE4IDAtMTA1LjM4NiAwLTEyMC0xNC41MTggMC0xMDUuMzg2IDAtMTIwIDB2MzB6IiBmaWxsPSIjY2RmIi8+PHBhdGggaWQ9IlhNTElEXzMxNV8iIGQ9Im0zMCAxMjBjLTEwLjQ5MiAwLTE5LjUwOCAwLTMwIDAgMC0xNC41MTggMC0xMDUuMzg2IDAtMTIwaDEyMHYzMGMtMTAuODg5IDAtNzkuMDQgMC05MCAweiIgZmlsbD0iI2U2ZjJmZiIvPjxwYXRoIGlkPSJYTUxJRF8zMTJfIiBkPSJtNDgwIDQ4MGMtMTAuODg5IDAtNzkuMDQgMC05MCAwdjMwaDEyMGMwLTE0LjUxOCAwLTEwNS4zODYgMC0xMjAtMTAuNDkyIDAtMTkuNTA4IDAtMzAgMHoiIGZpbGw9IiNjZGYiLz48cGF0aCBpZD0iWE1MSURfMzA5XyIgZD0ibTEyMCA1MTBjLTE0LjUxOCAwLTEwNS4zODYgMC0xMjAgMCAwLTE0LjUxOCAwLTEwNS4zODYgMC0xMjBoMzB2OTBoOTB6IiBmaWxsPSIjZTZmMmZmIi8+PHBhdGggaWQ9IlhNTElEXzMwMF8iIGQ9Im0yMTMuNjc3IDIzNC44MjRjLTE0LjUwNSA3LjIwNi0yNC43NDYgMTYuNzItMzEuOTU0IDI2LjIwMi0xNC4zNzkgMTguOTE0LTE2LjY5MSAzNy42OTgtMTYuNzIzIDM3Ljc2NnYzMS4yMDhoOTBsMTUtMzcuNTAxLTE1LTM3LjUwMXoiIGZpbGw9IiM2Y2YiLz48cGF0aCBpZD0iWE1MSURfMjk2XyIgZD0ibTM0NSAyOTguNzkyYy0uMTAzLS4yMjQtMi4wMzQtMTguOTI3LTE2LjU1NS0zNy44NzEtNy4xODgtOS4zNzctMTcuNDYtMTguODEzLTMyLjEyMi0yNi4wOTZsLTQxLjMyMyAyMC4xNzN2MzcuNTAxIDM3LjUwMWg5MGMwLTEwLjkxNSAwLTIwLjI5MyAwLTMxLjIwOHoiIGZpbGw9IiM0NTk2ZTYiLz48cGF0aCBpZD0iWE1MSURfMjkyXyIgZD0ibTIwMi41IDIwMi41YzAgMjguOTQ4IDIzLjU1IDUyLjUgNTIuNSA1Mi41bDE1LTUyLjUtMTUtNTIuNWMtMjguOTQ4IDAtNTIuNSAyMy41NS01Mi41IDUyLjV6IiBmaWxsPSIjZmRjIi8+PHBhdGggaWQ9IlhNTElEXzI4N18iIGQ9Im0zMDcuNSAyMDIuNWMwLTI4Ljk0Ny0yMy41NS01Mi41LTUyLjUtNTIuNXYxMDVjMjguOTQ3IDAgNTIuNS0yMy41NSA1Mi41LTUyLjV6IiBmaWxsPSIjZmZiZmIzIi8+PC9nPjwvc3ZnPg=="},"design":{"board":"Python3-Noetic","graph":{"blocks":[{"id":"9eb1fa61-8f57-42c4-ae29-32ceb1334403","type":"basic.constant","data":{"name":"Frequency","value":"10.0","local":true},"position":{"x":639,"y":20}},{"id":"87a0499f-6b87-44d9-af10-b4891f074bf6","type":"basic.code","data":{"code":"import cv2\nimport time\nimport numpy as np\nfrom time import sleep\nfrom utils.wires.wire_img import share_image, read_image\nfrom utils.wires.wire_str import read_string\nfrom utils.tools.freq_monitor import monitor_frequency\n\nclassName = []\nclassesFile = 'utils/models/yolov3/yolov3.txt'\n\nwith open(classesFile,'rt') as f:\n        className = f.read().rstrip('\\n').split('\\n')\n\ndef findObjects(outputs, img):\n\n    confThreshold = 0.3\n    nmsThreshold = 0.3\n    hT, wT, cT = img.shape\n    bbox = []\n    classIds = []\n    confs = []\n\n    for output in outputs:\n    \n        for det in output:\n            scores = det[5:]\n            classId = np.argmax(scores)\n            confidence = scores[classId]\n            if confidence > confThreshold:\n                w,h = int(det[2] * wT), int(det[3] * hT)\n                x,y = int((det[0]*wT) - w/2), int((det[1]*hT) - h/2)\n                bbox.append([x,y,w,h])\n                classIds.append(classId)\n                confs.append(float(confidence))\n    \n    indices = cv2.dnn.NMSBoxes(bbox, confs, confThreshold, nmsThreshold)\n    for i in indices:\n        #i = i[0]\n        box = bbox[i]\n        x,y,w,h = box[0],box[1],box[2],box[3]\n        cv2.rectangle(img,(x,y),(x+w, y+h),(255,0,255),2)\n        cv2.putText(img,f'{className[classIds[i]].upper()} {int(confs[i]*100)}%',\n                    (x,y-10),cv2.FONT_HERSHEY_SIMPLEX, 0.6, (255,0,255),2)\n                \ndef loop(block_name, input_wires, output_wires, parameters, flags):\n\n    input_0 = read_image(input_wires[0])\n    output_0 = share_image(output_wires[0])\n\n    enabled = False\n    try:\n        enable_wire = read_string(input_wires[1])\n    except IndexError:\n        enabled = True\n    \n    required_frequency, update = float(parameters[0]), 1\n    control_data = np.array([0.0,0.03])\n    \n    if flags[0] == 1:\n        monitor_frequency(block_name, control_data, required_frequency, update)\n    \n    whT = 320\n\n    modelConfiguration = 'utils/models/yolov3/yolov3-tiny.cfg'\n    modelWeights = 'utils/models/yolov3/yolov3-tiny.weights'\n\n    net = cv2.dnn.readNetFromDarknet(modelConfiguration,modelWeights)\n    net.setPreferableBackend(cv2.dnn.DNN_BACKEND_OPENCV)\n    net.setPreferableTarget(cv2.dnn. DNN_TARGET_CPU)\n\n    try:\n    \n        while True:\n        \n            if enabled or (update := bool(enable_wire.get()[0])):\n\n                frame = input_0.get()\n\n                if frame is not None:    \n\n                    #converting img to blob\n                    blob = cv2.dnn.blobFromImage(frame, 1/255,(whT,whT),[0,0,0],1, crop = False)\n            \n                    #Passing blob to network\n                    net.setInput(blob)\n\n                    layerNames = net.getLayerNames()\n                    outputNames = [layerNames[i-1] for i in net.getUnconnectedOutLayers()]\n            \n                    #forward Pass\n                    outputs = net.forward(outputNames)\n                    findObjects(outputs,frame)\n\n                    output_0.add(frame)\n                    control_data[0] += 1\n\n            sleep(control_data[1])\n            \n    except KeyboardInterrupt: \n    \n        input_0.release()\n        enable_wire.release()\n        output_0.release()","params":[{"name":"Frequency"}],"ports":{"in":[{"name":"Input"},{"name":"Enable"}],"out":[{"name":"Output"}]},"size":{"width":"20px","height":"20px"}},"position":{"x":322,"y":203}},{"id":"d3d4b5d3-103e-493a-b2ef-ed5c67812143","type":"basic.input","data":{"name":"Image"},"position":{"x":124,"y":297}},{"id":"d8120a29-0620-475b-abf0-edbaae6a87a5","type":"basic.input","data":{"name":"Enable"},"position":{"x":130,"y":451}},{"id":"9504805d-a10b-4f61-acd4-22b8a48d47a8","type":"basic.output","data":{"name":"Output"},"position":{"x":1156,"y":382}}],"wires":[{"source":{"block":"9eb1fa61-8f57-42c4-ae29-32ceb1334403","port":"constant-out"},"target":{"block":"87a0499f-6b87-44d9-af10-b4891f074bf6","port":"Frequency"}},{"source":{"block":"d3d4b5d3-103e-493a-b2ef-ed5c67812143","port":"input-out"},"target":{"block":"87a0499f-6b87-44d9-af10-b4891f074bf6","port":"Input"}},{"source":{"block":"d8120a29-0620-475b-abf0-edbaae6a87a5","port":"input-out"},"target":{"block":"87a0499f-6b87-44d9-af10-b4891f074bf6","port":"Enable"}},{"source":{"block":"87a0499f-6b87-44d9-af10-b4891f074bf6","port":"Output"},"target":{"block":"9504805d-a10b-4f61-acd4-22b8a48d47a8","port":"output-in"}}]}}}}}