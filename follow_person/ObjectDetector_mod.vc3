{"editor":{"id":"61f178bc-18a3-44f6-b9f2-819321aca469","locked":false,"offsetX":-25.19631759391494,"offsetY":-81.5827142633474,"zoom":105.30000000000003,"gridSize":0,"layers":[{"id":"f198d948-42b5-4cc2-8b11-fe072af4deeb","type":"diagram-links","isSvg":true,"transformed":true,"models":{"abbef5c0-7c07-4767-bd46-63af4f6d73f6":{"id":"abbef5c0-7c07-4767-bd46-63af4f6d73f6","type":"default","selected":false,"source":"3a59c566-ea5a-4f28-9523-004c754cdac9","sourcePort":"ba78b537-d107-4f76-97e0-82759a3d6346","target":"8c8a2c1a-3cc8-4fdd-b408-1f375920be01","targetPort":"cc160cd6-c0d1-438f-9c9e-45cd4697ecc2","points":[{"id":"f19a27ae-8809-408a-b69d-4279975f258b","type":"point","x":377.5000050693784,"y":416.4999902906388},{"id":"a3d6b14c-7285-47b4-97b8-7bfa06cb9afe","type":"point","x":429.5000019393704,"y":393.8281250284415}],"labels":[],"width":3,"color":"gray","curvyness":50,"selectedColor":"rgb(0,192,255)"},"e090b525-e5bf-4a24-86f4-4993334bf121":{"id":"e090b525-e5bf-4a24-86f4-4993334bf121","type":"default","selected":false,"source":"3680762a-e4d0-4a2f-8315-22db96c2f120","sourcePort":"a29a2c0d-b3fc-40a6-842c-1f5d96080b9d","target":"8c8a2c1a-3cc8-4fdd-b408-1f375920be01","targetPort":"018c3b14-ea4c-446d-bdce-5af65d078779","points":[{"id":"c31bf419-d18a-402d-b3cf-dcc40940acee","type":"point","x":385.5000012438131,"y":620.500015910334},{"id":"e309819b-68b1-4d42-9dbd-dae711570731","type":"point","x":429.5000019393704,"y":596.1562626643997}],"labels":[],"width":3,"color":"gray","curvyness":50,"selectedColor":"rgb(0,192,255)"},"af6cc354-588b-4d4e-926b-79766d4fb0b2":{"id":"af6cc354-588b-4d4e-926b-79766d4fb0b2","type":"default","selected":false,"source":"8c8a2c1a-3cc8-4fdd-b408-1f375920be01","sourcePort":"4d0f295e-df56-4345-9b8c-c2f3b6ab2e35","target":"0284379d-f0d9-4099-a08b-15cdb9c65fbc","targetPort":"222a1a1a-aa77-41e7-a440-30f9c700f7ef","points":[{"id":"cd930802-0477-4083-88ac-73f1b35ff76b","type":"point","x":1290.0780987692983,"y":343.2499922613846},{"id":"917c750e-83ff-4f7c-af44-0b5c554c10b3","type":"point","x":1343.5000321961143,"y":416.4999902906388}],"labels":[],"width":3,"color":"gray","curvyness":50,"selectedColor":"rgb(0,192,255)"},"4dd15daf-4c36-4f0f-9c38-0f086428766f":{"id":"4dd15daf-4c36-4f0f-9c38-0f086428766f","type":"default","selected":false,"source":"8c8a2c1a-3cc8-4fdd-b408-1f375920be01","sourcePort":"2ce1b674-24a6-45ba-9a55-e3a07013d72a","target":"fdde5749-5980-4f30-9ae9-b488600d3b38","targetPort":"2d0347f8-274a-43f0-9dcd-0d26e8187fc2","points":[{"id":"d7e40d09-6fae-4b9b-a469-a237890126ae","type":"point","x":1290.0780987692983,"y":494.9999971302859},{"id":"f0bf1648-6a41-4eba-abd1-c8e5419dbfd9","type":"point","selected":true,"x":1361.500012720509,"y":600.4999892473028}],"labels":[],"width":3,"color":"gray","curvyness":50,"selectedColor":"rgb(0,192,255)"},"251d79f6-7611-4646-9634-a6ed98fa4d11":{"id":"251d79f6-7611-4646-9634-a6ed98fa4d11","type":"default","selected":false,"source":"8c8a2c1a-3cc8-4fdd-b408-1f375920be01","sourcePort":"cf754c0a-294a-48ec-a718-7230923a7640","target":"e41c1cd8-d2fb-4df2-b21b-4ef6d9417a06","targetPort":"5b899c79-af47-4ae2-b947-2987f35961b2","points":[{"id":"262165d2-8fd8-4cc7-bd1a-f44b6a78d81b","type":"point","x":1290.0780987692983,"y":646.7500019991874},{"id":"08a5f943-4dd2-4414-ba0a-2f03ee448ad6","type":"point","x":1369.4999654226103,"y":687.4999820598769}],"labels":[],"width":3,"color":"gray","curvyness":50,"selectedColor":"rgb(0,192,255)"}}},{"id":"099b6333-8ae3-4c4a-a3eb-d861374a1159","type":"diagram-nodes","isSvg":false,"transformed":true,"models":{"3680762a-e4d0-4a2f-8315-22db96c2f120":{"id":"3680762a-e4d0-4a2f-8315-22db96c2f120","type":"basic.input","selected":false,"x":292,"y":594,"ports":[{"id":"a29a2c0d-b3fc-40a6-842c-1f5d96080b9d","type":"port.output","x":377.99999486787084,"y":613.0000240251695,"name":"input-out","alignment":"right","parentNode":"3680762a-e4d0-4a2f-8315-22db96c2f120","links":["e090b525-e5bf-4a24-86f4-4993334bf121"],"in":false,"label":"Enable","hideLabel":true}],"data":{"name":"Enable"}},"3a59c566-ea5a-4f28-9523-004c754cdac9":{"id":"3a59c566-ea5a-4f28-9523-004c754cdac9","type":"basic.input","selected":false,"x":284,"y":390,"ports":[{"id":"ba78b537-d107-4f76-97e0-82759a3d6346","type":"port.output","x":370.000013184214,"y":408.99998391469654,"name":"input-out","alignment":"right","parentNode":"3a59c566-ea5a-4f28-9523-004c754cdac9","links":["abbef5c0-7c07-4767-bd46-63af4f6d73f6"],"in":false,"label":"Img IN","hideLabel":true}],"data":{"name":"Img IN"}},"0284379d-f0d9-4099-a08b-15cdb9c65fbc":{"id":"0284379d-f0d9-4099-a08b-15cdb9c65fbc","type":"basic.output","selected":false,"x":1335,"y":390,"ports":[{"id":"222a1a1a-aa77-41e7-a440-30f9c700f7ef","type":"port.input","x":1336.0000113293943,"y":408.99998391469654,"name":"output-in","alignment":"left","parentNode":"0284379d-f0d9-4099-a08b-15cdb9c65fbc","links":["af6cc354-588b-4d4e-926b-79766d4fb0b2"],"in":true,"label":"output-in","hideLabel":true}],"data":{"name":"Img OUT"}},"fdde5749-5980-4f30-9ae9-b488600d3b38":{"id":"fdde5749-5980-4f30-9ae9-b488600d3b38","type":"basic.output","selected":false,"x":1353,"y":574,"ports":[{"id":"2d0347f8-274a-43f0-9dcd-0d26e8187fc2","type":"port.input","x":1353.999991853789,"y":592.9999683805827,"name":"output-in","alignment":"left","parentNode":"fdde5749-5980-4f30-9ae9-b488600d3b38","links":["4dd15daf-4c36-4f0f-9c38-0f086428766f"],"in":true,"label":"output-in","hideLabel":true}],"data":{"name":"Results1"}},"8c8a2c1a-3cc8-4fdd-b408-1f375920be01":{"id":"8c8a2c1a-3cc8-4fdd-b408-1f375920be01","type":"basic.code","selected":false,"x":421,"y":140,"ports":[{"id":"cc160cd6-c0d1-438f-9c9e-45cd4697ecc2","type":"port.input","x":421.9999955634282,"y":386.32811865249926,"name":"Img IN","alignment":"left","parentNode":"8c8a2c1a-3cc8-4fdd-b408-1f375920be01","links":["abbef5c0-7c07-4767-bd46-63af4f6d73f6"],"in":true,"label":"Img IN","hideLabel":false},{"id":"018c3b14-ea4c-446d-bdce-5af65d078779","type":"port.input","x":421.9999955634282,"y":588.6562707792353,"name":"Enable","alignment":"left","parentNode":"8c8a2c1a-3cc8-4fdd-b408-1f375920be01","links":["e090b525-e5bf-4a24-86f4-4993334bf121"],"in":true,"label":"Enable","hideLabel":false},{"id":"4d0f295e-df56-4345-9b8c-c2f3b6ab2e35","type":"port.output","x":1282.5780779025781,"y":335.75000037622016,"name":"Img Out","alignment":"right","parentNode":"8c8a2c1a-3cc8-4fdd-b408-1f375920be01","links":["af6cc354-588b-4d4e-926b-79766d4fb0b2"],"in":false,"label":"Img Out","hideLabel":false},{"id":"2ce1b674-24a6-45ba-9a55-e3a07013d72a","type":"port.output","x":1282.5780779025781,"y":487.5000052451215,"name":"Results1","alignment":"right","parentNode":"8c8a2c1a-3cc8-4fdd-b408-1f375920be01","links":["4dd15daf-4c36-4f0f-9c38-0f086428766f"],"in":false,"label":"Results1","hideLabel":false},{"id":"cf754c0a-294a-48ec-a718-7230923a7640","type":"port.output","x":1282.5780779025781,"y":639.2500101140229,"name":"Results2","alignment":"right","parentNode":"8c8a2c1a-3cc8-4fdd-b408-1f375920be01","links":["251d79f6-7611-4646-9634-a6ed98fa4d11"],"in":false,"label":"Results2","hideLabel":false}],"data":{"code":"from distutils.command.install_egg_info import to_filename\nimport cv2\nimport numpy as np\nimport time\n\nclassName = []\nclassIds = []\nbbox = []\nclassesFile = 'utils/models/yolov3/yolov3.txt'\n\nwith open(classesFile,'rt') as f:\n    className = f.read().rstrip('\\n').split('\\n')\n\ndef findObjects(outputs, img):\n    \n    global classIds\n    global bbox\n\n    classIds = []\n    bbox = []\n\n    confThreshold = 0.3\n    nmsThreshold = 0.3\n    hT, wT, cT = img.shape\n    confs = []\n\n    for output in outputs:\n    \n        for det in output:\n            scores = det[5:]\n            classId = np.argmax(scores)\n            confidence = scores[classId]\n            if confidence > confThreshold:\n                w,h = int(det[2] * wT), int(det[3] * hT)\n                x,y = int((det[0]*wT) - w/2), int((det[1]*hT) - h/2)\n                bbox.append([x,y,w,h])\n                classIds.append(classId)\n                confs.append(float(confidence))\n    \n    indices = cv2.dnn.NMSBoxes(bbox, confs, confThreshold, nmsThreshold)\n    \n    for i in range(len(indices)):\n        box = bbox[i]\n        x,y,w,h = box[0],box[1],box[2],box[3]\n        cv2.rectangle(img,(x,y),(x+w, y+h),(255,0,255),2)\n        cv2.putText(img,f'{className[classIds[i]].upper()} {int(confs[i]*100)}%',\n                    (x,y-10),cv2.FONT_HERSHEY_SIMPLEX, 0.6, (255,0,255),2)\n           \ndef main(inputs, outputs, parameters, synchronise):\n    auto_enable = True\n    try:\n        enable = inputs.read_number(\"Enable\")\n    except Exception:\n        auto_enable = True\n    \n    whT = 320\n\n    modelConfiguration = 'utils/models/yolov3/yolov3-tiny.cfg'\n    modelWeights = 'utils/models/yolov3/yolov3-tiny.weights'\n\n    net = cv2.dnn.readNetFromDarknet(modelConfiguration,modelWeights)\n    net.setPreferableBackend(cv2.dnn.DNN_BACKEND_OPENCV)\n    net.setPreferableTarget(cv2.dnn.DNN_TARGET_CPU)\n\n    while(1):\n        try:\n            frame = inputs.read_image(\"Img IN\")\n        except Exception:\n            continue\n    \n        if frame is None:\n            continue\n\n        #converting img to blob\n        blob = cv2.dnn.blobFromImage(frame, 1/255,(whT,whT),[0,0,0],1, crop = False)\n\n        #Passing blob to network\n        net.setInput(blob)\n\n        layerNames = net.getLayerNames()\n        outputNames = []\n        outLayers = net.getUnconnectedOutLayers()\n        \n        for i in range(len(outLayers)):\n            outputNames.append(layerNames[outLayers[i] - 1])\n\n        #forward Pass\n        results = net.forward(outputNames)\n        findObjects(results,frame)\n\n        print(\"results -> \")\n\n        is_person = False\n        for i in classIds:\n            print(className[i])\n            if(className[i] == \"person\"):\n                is_person = True\n                break\n        to__send = [-1,-1,-1,-1]\n        if(is_person):\n            to__send = bbox[i]\n\n        outputs.share_image(\"Img OUT\", frame)\n        outputs.share_array(\"Results1\", to__send)\n        outputs.share_array(\"Results2\", to__send)\n        synchronise()\n","frequency":"30","params":[],"ports":{"in":[{"name":"Img IN"},{"name":"Enable"}],"out":[{"name":"Img Out"},{"name":"Results1"},{"name":"Results2"}]},"size":{"width":"750px","height":"300px"}}},"e41c1cd8-d2fb-4df2-b21b-4ef6d9417a06":{"id":"e41c1cd8-d2fb-4df2-b21b-4ef6d9417a06","type":"basic.output","selected":false,"x":1361,"y":661,"ports":[{"id":"5b899c79-af47-4ae2-b947-2987f35961b2","type":"port.input","x":1361.9999445558901,"y":679.9999901747125,"name":"output-in","alignment":"left","parentNode":"e41c1cd8-d2fb-4df2-b21b-4ef6d9417a06","links":["251d79f6-7611-4646-9634-a6ed98fa4d11"],"in":true,"label":"output-in","hideLabel":true}],"data":{"name":"Results2"}}}}]},"version":"3.0","package":{"name":"ObjectDetector","version":"2.0.0","description":"Detects Objects in an Image","author":"Faizan Ahmed","image":"data:image/svg+xml;base64,PHN2ZyBpZD0iQ2FwYV8xIiBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCA1MTAgNTEwIiBoZWlnaHQ9IjUxMiIgdmlld0JveD0iMCAwIDUxMCA1MTAiIHdpZHRoPSI1MTIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgaWQ9IlhNTElEXzI3MF8iPjxwYXRoIGlkPSJYTUxJRF8zOTdfIiBkPSJtMjQwIDB2NzUuNjJsNy41IDYuMjk3IDcuNS02LjkxNyAzLjY3My0zNi4xMDYtMy42NzMtMzguODk0Yy01LjI0NiAwLTkuNzU0IDAtMTUgMHoiIGZpbGw9IiNlNjM5NTAiLz48cGF0aCBpZD0iWE1MSURfMzYxXyIgZD0ibTI3MCAwYy01LjI0NiAwLTkuNzU0IDAtMTUgMHY3NWw3LjUgNi45MTYgNy41LTYuMjk3YzAtMTguOTg5IDAtNjMuNDM2IDAtNzUuNjE5eiIgZmlsbD0iI2NkMDAwMCIvPjxwYXRoIGlkPSJYTUxJRF8zNThfIiBkPSJtMjQwIDQzNC4zNzh2NzUuNjIyaDE1bDUuODMzLTM1LjMzMy01LjgzMy0zOS42NjctNy41LTcuNjY3eiIgZmlsbD0iI2U2Mzk1MCIvPjxwYXRoIGlkPSJYTUxJRF8zNTVfIiBkPSJtMjcwIDQzNC4zNzgtNy41LTcuMDQ1LTcuNSA3LjY2N3Y3NWgxNWMwLTEyLjAwOSAwLTU2LjYzMiAwLTc1LjYyMnoiIGZpbGw9IiNjZDAwMDAiLz48cGF0aCBpZD0iWE1MSURfMzUyXyIgZD0ibTQzNC4zODEgMjcwaDc1LjYxOWMwLTEwLjQ5MiAwLTE5LjUwOCAwLTMwLTEyLjAwOSAwLTU2LjYyOSAwLTc1LjYxOSAwbC0xNC4zODEgMTV6IiBmaWxsPSIjY2QwMDAwIi8+PHBhdGggaWQ9IlhNTElEXzM0OV8iIGQ9Im03NS42MjIgMjcwYy0xOC45OSAwLTYzLjQzOSAwLTc1LjYyMiAwIDAtMTAuNDkyIDAtMTkuNTA4IDAtMzBoNzUuNjIxbDE0LjM3OSAxNXoiIGZpbGw9IiNlNjM5NTAiLz48cGF0aCBpZD0iWE1MSURfMzQ1XyIgZD0ibTc1IDI1NWMwIDk5LjI1IDgwLjc0NSAxODAgMTgwIDE4MGwxNS0xODAtMTUtMTgwYy05OS4yNSAwLTE4MCA4MC43NDUtMTgwIDE4MHoiIGZpbGw9IiNmZjYzN2IiLz48cGF0aCBpZD0iWE1MSURfMzQyXyIgZD0ibTQzNSAyNTVjMC05OS4yNDktODAuNzQ1LTE4MC0xODAtMTgwdjM2MGM5OS4yNDkgMCAxODAtODAuNzQ1IDE4MC0xODB6IiBmaWxsPSIjZTYzOTUwIi8+PHBhdGggaWQ9IlhNTElEXzMyN18iIGQ9Im0xMDUgMjU1YzAgODIuNzA3IDY3LjI4NyAxNTAgMTUwIDE1MGwxNS0xNTAtMTUtMTUwYy04Mi43MDggMC0xNTAgNjcuMjg3LTE1MCAxNTB6IiBmaWxsPSIjZTZmMmZmIi8+PHBhdGggaWQ9IlhNTElEXzMyM18iIGQ9Im00MDUgMjU1YzAtODIuNzA4LTY3LjI4Ny0xNTAtMTUwLTE1MHYzMDBjODIuNzA3IDAgMTUwLTY3LjI4OCAxNTAtMTUweiIgZmlsbD0iI2NkZiIvPjxwYXRoIGlkPSJYTUxJRF8zMjBfIiBkPSJtNDgwIDMwdjkwaDMwYzAtMTQuNTE4IDAtMTA1LjM4NiAwLTEyMC0xNC41MTggMC0xMDUuMzg2IDAtMTIwIDB2MzB6IiBmaWxsPSIjY2RmIi8+PHBhdGggaWQ9IlhNTElEXzMxNV8iIGQ9Im0zMCAxMjBjLTEwLjQ5MiAwLTE5LjUwOCAwLTMwIDAgMC0xNC41MTggMC0xMDUuMzg2IDAtMTIwaDEyMHYzMGMtMTAuODg5IDAtNzkuMDQgMC05MCAweiIgZmlsbD0iI2U2ZjJmZiIvPjxwYXRoIGlkPSJYTUxJRF8zMTJfIiBkPSJtNDgwIDQ4MGMtMTAuODg5IDAtNzkuMDQgMC05MCAwdjMwaDEyMGMwLTE0LjUxOCAwLTEwNS4zODYgMC0xMjAtMTAuNDkyIDAtMTkuNTA4IDAtMzAgMHoiIGZpbGw9IiNjZGYiLz48cGF0aCBpZD0iWE1MSURfMzA5XyIgZD0ibTEyMCA1MTBjLTE0LjUxOCAwLTEwNS4zODYgMC0xMjAgMCAwLTE0LjUxOCAwLTEwNS4zODYgMC0xMjBoMzB2OTBoOTB6IiBmaWxsPSIjZTZmMmZmIi8+PHBhdGggaWQ9IlhNTElEXzMwMF8iIGQ9Im0yMTMuNjc3IDIzNC44MjRjLTE0LjUwNSA3LjIwNi0yNC43NDYgMTYuNzItMzEuOTU0IDI2LjIwMi0xNC4zNzkgMTguOTE0LTE2LjY5MSAzNy42OTgtMTYuNzIzIDM3Ljc2NnYzMS4yMDhoOTBsMTUtMzcuNTAxLTE1LTM3LjUwMXoiIGZpbGw9IiM2Y2YiLz48cGF0aCBpZD0iWE1MSURfMjk2XyIgZD0ibTM0NSAyOTguNzkyYy0uMTAzLS4yMjQtMi4wMzQtMTguOTI3LTE2LjU1NS0zNy44NzEtNy4xODgtOS4zNzctMTcuNDYtMTguODEzLTMyLjEyMi0yNi4wOTZsLTQxLjMyMyAyMC4xNzN2MzcuNTAxIDM3LjUwMWg5MGMwLTEwLjkxNSAwLTIwLjI5MyAwLTMxLjIwOHoiIGZpbGw9IiM0NTk2ZTYiLz48cGF0aCBpZD0iWE1MSURfMjkyXyIgZD0ibTIwMi41IDIwMi41YzAgMjguOTQ4IDIzLjU1IDUyLjUgNTIuNSA1Mi41bDE1LTUyLjUtMTUtNTIuNWMtMjguOTQ4IDAtNTIuNSAyMy41NS01Mi41IDUyLjV6IiBmaWxsPSIjZmRjIi8+PHBhdGggaWQ9IlhNTElEXzI4N18iIGQ9Im0zMDcuNSAyMDIuNWMwLTI4Ljk0Ny0yMy41NS01Mi41LTUyLjUtNTIuNXYxMDVjMjguOTQ3IDAgNTIuNS0yMy41NSA1Mi41LTUyLjV6IiBmaWxsPSIjZmZiZmIzIi8+PC9nPjwvc3ZnPg=="},"design":{"board":"Python3-Noetic","graph":{"blocks":[{"id":"3680762a-e4d0-4a2f-8315-22db96c2f120","type":"basic.input","data":{"name":"Enable"},"position":{"x":292,"y":594}},{"id":"3a59c566-ea5a-4f28-9523-004c754cdac9","type":"basic.input","data":{"name":"Img IN"},"position":{"x":284,"y":390}},{"id":"0284379d-f0d9-4099-a08b-15cdb9c65fbc","type":"basic.output","data":{"name":"Img OUT"},"position":{"x":1335,"y":390}},{"id":"fdde5749-5980-4f30-9ae9-b488600d3b38","type":"basic.output","data":{"name":"Results1"},"position":{"x":1353,"y":574}},{"id":"8c8a2c1a-3cc8-4fdd-b408-1f375920be01","type":"basic.code","data":{"code":"from distutils.command.install_egg_info import to_filename\nimport cv2\nimport numpy as np\nimport time\n\nclassName = []\nclassIds = []\nbbox = []\nclassesFile = 'utils/models/yolov3/yolov3.txt'\n\nwith open(classesFile,'rt') as f:\n    className = f.read().rstrip('\\n').split('\\n')\n\ndef findObjects(outputs, img):\n    \n    global classIds\n    global bbox\n\n    classIds = []\n    bbox = []\n\n    confThreshold = 0.3\n    nmsThreshold = 0.3\n    hT, wT, cT = img.shape\n    confs = []\n\n    for output in outputs:\n    \n        for det in output:\n            scores = det[5:]\n            classId = np.argmax(scores)\n            confidence = scores[classId]\n            if confidence > confThreshold:\n                w,h = int(det[2] * wT), int(det[3] * hT)\n                x,y = int((det[0]*wT) - w/2), int((det[1]*hT) - h/2)\n                bbox.append([x,y,w,h])\n                classIds.append(classId)\n                confs.append(float(confidence))\n    \n    indices = cv2.dnn.NMSBoxes(bbox, confs, confThreshold, nmsThreshold)\n    \n    for i in range(len(indices)):\n        box = bbox[i]\n        x,y,w,h = box[0],box[1],box[2],box[3]\n        cv2.rectangle(img,(x,y),(x+w, y+h),(255,0,255),2)\n        cv2.putText(img,f'{className[classIds[i]].upper()} {int(confs[i]*100)}%',\n                    (x,y-10),cv2.FONT_HERSHEY_SIMPLEX, 0.6, (255,0,255),2)\n           \ndef main(inputs, outputs, parameters, synchronise):\n    auto_enable = True\n    try:\n        enable = inputs.read_number(\"Enable\")\n    except Exception:\n        auto_enable = True\n    \n    whT = 320\n\n    modelConfiguration = 'utils/models/yolov3/yolov3-tiny.cfg'\n    modelWeights = 'utils/models/yolov3/yolov3-tiny.weights'\n\n    net = cv2.dnn.readNetFromDarknet(modelConfiguration,modelWeights)\n    net.setPreferableBackend(cv2.dnn.DNN_BACKEND_OPENCV)\n    net.setPreferableTarget(cv2.dnn.DNN_TARGET_CPU)\n\n    while(1):\n        try:\n            frame = inputs.read_image(\"Img IN\")\n        except Exception:\n            continue\n    \n        if frame is None:\n            continue\n\n        #converting img to blob\n        blob = cv2.dnn.blobFromImage(frame, 1/255,(whT,whT),[0,0,0],1, crop = False)\n\n        #Passing blob to network\n        net.setInput(blob)\n\n        layerNames = net.getLayerNames()\n        outputNames = []\n        outLayers = net.getUnconnectedOutLayers()\n        \n        for i in range(len(outLayers)):\n            outputNames.append(layerNames[outLayers[i] - 1])\n\n        #forward Pass\n        results = net.forward(outputNames)\n        findObjects(results,frame)\n\n        print(\"results -> \")\n\n        is_person = False\n        for i in classIds:\n            print(className[i])\n            if(className[i] == \"person\"):\n                is_person = True\n                break\n        to__send = [-1,-1,-1,-1]\n        if(is_person):\n            to__send = bbox[i]\n\n        outputs.share_image(\"Img OUT\", frame)\n        outputs.share_array(\"Results1\", to__send)\n        outputs.share_array(\"Results2\", to__send)\n        synchronise()\n","frequency":"30","params":[],"ports":{"in":[{"name":"Img IN"},{"name":"Enable"}],"out":[{"name":"Img Out"},{"name":"Results1"},{"name":"Results2"}]},"size":{"width":"750px","height":"300px"}},"position":{"x":421,"y":140}},{"id":"e41c1cd8-d2fb-4df2-b21b-4ef6d9417a06","type":"basic.output","data":{"name":"Results2"},"position":{"x":1361,"y":661}}],"wires":[{"source":{"block":"3a59c566-ea5a-4f28-9523-004c754cdac9","port":"input-out","name":"Img IN"},"target":{"block":"8c8a2c1a-3cc8-4fdd-b408-1f375920be01","port":"Img IN","name":"Img IN"}},{"source":{"block":"3680762a-e4d0-4a2f-8315-22db96c2f120","port":"input-out","name":"Enable"},"target":{"block":"8c8a2c1a-3cc8-4fdd-b408-1f375920be01","port":"Enable","name":"Enable"}},{"source":{"block":"8c8a2c1a-3cc8-4fdd-b408-1f375920be01","port":"Img Out","name":"Img Out"},"target":{"block":"0284379d-f0d9-4099-a08b-15cdb9c65fbc","port":"output-in","name":"output-in"}},{"source":{"block":"8c8a2c1a-3cc8-4fdd-b408-1f375920be01","port":"Results1","name":"Results1"},"target":{"block":"fdde5749-5980-4f30-9ae9-b488600d3b38","port":"output-in","name":"output-in"}},{"source":{"block":"8c8a2c1a-3cc8-4fdd-b408-1f375920be01","port":"Results2","name":"Results2"},"target":{"block":"e41c1cd8-d2fb-4df2-b21b-4ef6d9417a06","port":"output-in","name":"output-in"}}]}},"dependencies":{}}