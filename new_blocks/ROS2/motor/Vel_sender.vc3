{"editor":{"id":"2a4c5084-962d-427e-a294-500d4f31ada9","locked":false,"offsetX":0,"offsetY":0,"zoom":100,"gridSize":0,"layers":[{"id":"ebdd453d-fe2c-4ac4-80b6-ae4c71db36a0","type":"diagram-links","isSvg":true,"transformed":true,"models":{"1684cd4f-ff84-40d4-be8c-429162e9f0fb":{"id":"1684cd4f-ff84-40d4-be8c-429162e9f0fb","type":"default","selected":false,"source":"0004-32f6a45f-69d6-42dd-af6e-78a74a864a13","sourcePort":"a274857a-1a74-4cea-bfb9-48f16ff5fe0d","target":"a84d5e2d-c71c-46f4-a0c9-25fcb79453b1","targetPort":"b7c6b214-65cb-4c06-8400-320170852f9c","points":[{"id":"6952bc74-5cfc-4ae5-bd5a-9b56a782f54c","type":"point","x":850,"y":146.5},{"id":"8cc1934e-48cc-470a-bce2-500720ef024e","type":"point","x":896.828125,"y":245.5}],"labels":[],"width":3,"color":"gray","curvyness":50,"selectedColor":"rgb(0,192,255)"},"e588de69-71d8-44a0-a5c1-1a526e45c812":{"id":"e588de69-71d8-44a0-a5c1-1a526e45c812","type":"default","selected":false,"source":"9b4fea63-99fb-41c8-9065-3de4d39f25f5","sourcePort":"795ee354-2e75-4214-bfac-e49bbe1c6ded","target":"a84d5e2d-c71c-46f4-a0c9-25fcb79453b1","targetPort":"2a3c3646-07cd-4427-85df-88ba0ee41d34","points":[{"id":"8b34c1ba-122a-46c2-a6b7-fcceee396e49","type":"point","x":326.5,"y":500.5},{"id":"37be7c77-8e2a-41d9-93e7-e845384b70d6","type":"point","x":397.5,"y":500}],"labels":[],"width":3,"color":"gray","curvyness":50,"selectedColor":"rgb(0,192,255)"},"97b85b86-42a8-4e54-b360-8147ce79f810":{"id":"97b85b86-42a8-4e54-b360-8147ce79f810","type":"default","selected":false,"source":"a84d5e2d-c71c-46f4-a0c9-25fcb79453b1","sourcePort":"d0226b56-60dc-4ed6-aaa8-f41a5efdd182","target":"95fe8e15-fa8d-44af-9de2-3686fcc5d0de","targetPort":"2d2acfdf-8766-4c69-97e6-99c61f5768cc","points":[{"id":"bdb9b206-3c19-4ace-8909-486dde7108b4","type":"point","x":1396.15625,"y":500},{"id":"740f6b61-a890-45d1-a5dd-896b2fa8a525","type":"point","x":1458.5,"y":485.5}],"labels":[],"width":3,"color":"gray","curvyness":50,"selectedColor":"rgb(0,192,255)"}}},{"id":"c90ce7d1-3b69-4c27-9e5f-6e96d9dc1dd3","type":"diagram-nodes","isSvg":false,"transformed":true,"models":{"a84d5e2d-c71c-46f4-a0c9-25fcb79453b1":{"id":"a84d5e2d-c71c-46f4-a0c9-25fcb79453b1","type":"basic.code","selected":false,"x":389,"y":237,"ports":[{"id":"2a3c3646-07cd-4427-85df-88ba0ee41d34","type":"port.input","x":390,"y":492.5,"name":"E","alignment":"left","parentNode":"a84d5e2d-c71c-46f4-a0c9-25fcb79453b1","links":["e588de69-71d8-44a0-a5c1-1a526e45c812"],"in":true,"label":"E","hideLabel":false},{"id":"d0226b56-60dc-4ed6-aaa8-f41a5efdd182","type":"port.output","x":1388.65625,"y":492.5,"name":"Out","alignment":"right","parentNode":"a84d5e2d-c71c-46f4-a0c9-25fcb79453b1","links":["97b85b86-42a8-4e54-b360-8147ce79f810"],"in":false,"label":"Out","hideLabel":false},{"id":"b7c6b214-65cb-4c06-8400-320170852f9c","type":"port.parameter","x":889.328125,"y":238,"name":"Freq","alignment":"top","parentNode":"a84d5e2d-c71c-46f4-a0c9-25fcb79453b1","links":["1684cd4f-ff84-40d4-be8c-429162e9f0fb"],"in":true,"label":"Freq","hideLabel":false}],"data":{"code":"import numpy as np\nfrom time import sleep\nfrom utils.wires.wire_str import read_string, share_string\nfrom utils.tools.freq_monitor import monitor_frequency\n\ndef loop(block_name, input_wires, output_wires, parameters, flags):\n\n    output_0 = share_string(output_wires[0])\n\n    enabled = False\n    try:\n        enable_wire = read_string(input_wires[0])\n    except IndexError:\n        enabled = np.True_\n\n    required_frequency, update = float(parameters[0]), 1\n    control_data = np.array([0.0,0.03])\n\n    if flags[0] == 1:\n        monitor_frequency(block_name, control_data, required_frequency, update)\n\n    try:\n\n        while True:\n\n\n            if enabled or (update := bool(enable_wire.get()[0])):\n                vels = [1,0,0,1,0,0]\n                if measure is not None:\n                    to_write = np.array(vels, dtype='<U64')\n                    output_0.add(to_write)\n                    control_data[0] += 1\n                \n            sleep(control_data[1])       \n    \n    except KeyboardInterrupt:\n\n        laser_subscriber.destroy_node()\n        rclpy.shutdown()\n\n        enable_wire.release()\n        output_0.release()","params":[{"name":"Freq"}],"ports":{"in":[{"name":"E"}],"out":[{"name":"Out"}]},"size":{"width":"0px","height":"0px"}}},"0004-32f6a45f-69d6-42dd-af6e-78a74a864a13":{"id":"0004-32f6a45f-69d6-42dd-af6e-78a74a864a13","type":"basic.constant","selected":true,"x":788,"y":30,"ports":[{"id":"a274857a-1a74-4cea-bfb9-48f16ff5fe0d","type":"port.output","x":842.5,"y":139,"name":"constant-out","alignment":"bottom","parentNode":"0004-32f6a45f-69d6-42dd-af6e-78a74a864a13","links":["1684cd4f-ff84-40d4-be8c-429162e9f0fb"],"in":false,"label":"constant-out","hideLabel":true}],"data":{"name":"Freq","value":"30.0","local":true}},"9b4fea63-99fb-41c8-9065-3de4d39f25f5":{"id":"9b4fea63-99fb-41c8-9065-3de4d39f25f5","type":"basic.input","selected":false,"x":233,"y":474,"ports":[{"id":"795ee354-2e75-4214-bfac-e49bbe1c6ded","type":"port.output","x":319,"y":493,"name":"input-out","alignment":"right","parentNode":"9b4fea63-99fb-41c8-9065-3de4d39f25f5","links":["e588de69-71d8-44a0-a5c1-1a526e45c812"],"in":false,"label":"input-out","hideLabel":true}],"data":{"name":"E"}},"95fe8e15-fa8d-44af-9de2-3686fcc5d0de":{"id":"95fe8e15-fa8d-44af-9de2-3686fcc5d0de","type":"basic.output","selected":false,"x":1450,"y":459,"ports":[{"id":"2d2acfdf-8766-4c69-97e6-99c61f5768cc","type":"port.input","x":1451,"y":478,"name":"output-in","alignment":"left","parentNode":"95fe8e15-fa8d-44af-9de2-3686fcc5d0de","links":["97b85b86-42a8-4e54-b360-8147ce79f810"],"in":true,"label":"output-in","hideLabel":true}],"data":{"name":"Out"}}}}]},"version":"3.0","package":{"name":"","version":"","description":"","author":"","image":""},"design":{"board":"Python3-Noetic","graph":{"blocks":[{"id":"a84d5e2d-c71c-46f4-a0c9-25fcb79453b1","type":"basic.code","data":{"code":"import numpy as np\nfrom time import sleep\nfrom utils.wires.wire_str import read_string, share_string\nfrom utils.tools.freq_monitor import monitor_frequency\n\ndef loop(block_name, input_wires, output_wires, parameters, flags):\n\n    output_0 = share_string(output_wires[0])\n\n    enabled = False\n    try:\n        enable_wire = read_string(input_wires[0])\n    except IndexError:\n        enabled = np.True_\n\n    required_frequency, update = float(parameters[0]), 1\n    control_data = np.array([0.0,0.03])\n\n    if flags[0] == 1:\n        monitor_frequency(block_name, control_data, required_frequency, update)\n\n    try:\n\n        while True:\n\n\n            if enabled or (update := bool(enable_wire.get()[0])):\n                vels = [1,0,0,1,0,0]\n                if measure is not None:\n                    to_write = np.array(vels, dtype='<U64')\n                    output_0.add(to_write)\n                    control_data[0] += 1\n                \n            sleep(control_data[1])       \n    \n    except KeyboardInterrupt:\n\n        laser_subscriber.destroy_node()\n        rclpy.shutdown()\n\n        enable_wire.release()\n        output_0.release()","params":[{"name":"Freq"}],"ports":{"in":[{"name":"E"}],"out":[{"name":"Out"}]},"size":{"width":"0px","height":"0px"}},"position":{"x":389,"y":237}},{"id":"0004-32f6a45f-69d6-42dd-af6e-78a74a864a13","type":"basic.constant","data":{"name":"Freq","value":"30.0","local":true},"position":{"x":788,"y":30}},{"id":"9b4fea63-99fb-41c8-9065-3de4d39f25f5","type":"basic.input","data":{"name":"E"},"position":{"x":233,"y":474}},{"id":"95fe8e15-fa8d-44af-9de2-3686fcc5d0de","type":"basic.output","data":{"name":"Out"},"position":{"x":1450,"y":459}}],"wires":[{"source":{"block":"0004-32f6a45f-69d6-42dd-af6e-78a74a864a13","port":"constant-out"},"target":{"block":"a84d5e2d-c71c-46f4-a0c9-25fcb79453b1","port":"Freq"}},{"source":{"block":"9b4fea63-99fb-41c8-9065-3de4d39f25f5","port":"input-out"},"target":{"block":"a84d5e2d-c71c-46f4-a0c9-25fcb79453b1","port":"E"}},{"source":{"block":"a84d5e2d-c71c-46f4-a0c9-25fcb79453b1","port":"Out"},"target":{"block":"95fe8e15-fa8d-44af-9de2-3686fcc5d0de","port":"output-in"}}]}},"dependencies":{}}