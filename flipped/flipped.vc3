{"editor":{"id":"87244f3f-8d45-4783-b52e-1ffc0af546f1","locked":false,"offsetX":19,"offsetY":43,"zoom":100,"gridSize":0,"layers":[{"id":"893b2936-e51e-4172-a6e0-5e32f1f05c5f","type":"diagram-links","isSvg":true,"transformed":true,"models":{"5d161fd7-1725-43d9-98b0-6c5593e351df":{"id":"5d161fd7-1725-43d9-98b0-6c5593e351df","type":"default","selected":false,"source":"0013-2c01e20d-d2c6-4578-ae88-bfeb945d6a52","sourcePort":"dada97d8-6a14-400c-a36b-c784b51b7dc4","target":"a6dc263c-ee37-4f35-ab6d-6f0aeadae891","targetPort":"21b7a94c-4b1f-481c-96f8-7f4d02db579d","points":[{"id":"1455d714-0acd-4f56-bbbd-812f01830bf0","type":"point","x":752,"y":101.5},{"id":"fbdc486a-93b3-40a5-8d0b-8e09975e73e4","type":"point","x":855.328125,"y":176.5}],"labels":[],"width":3,"color":"gray","curvyness":50,"selectedColor":"rgb(0,192,255)"},"5be4d477-4996-4e77-afca-804bd4a64ecb":{"id":"5be4d477-4996-4e77-afca-804bd4a64ecb","type":"default","selected":false,"source":"a6dc263c-ee37-4f35-ab6d-6f0aeadae891","sourcePort":"4dcc893d-9413-496f-b57c-c06c253d81a3","target":"ba2a1546-5dce-4914-8b90-206104ef627a","targetPort":"23a4bf01-9d7e-4cac-b1b2-b33ea02ca54d","points":[{"id":"39241857-e7f2-4c53-a009-d25db4b9ee4e","type":"point","x":1457.15625,"y":469},{"id":"a7940bfd-5437-4420-bd85-0d8fd8749080","type":"point","x":1605.5,"y":406.5}],"labels":[],"width":3,"color":"gray","curvyness":50,"selectedColor":"rgb(0,192,255)"},"750ada84-f4c9-4d3d-8a82-1b3aedeb55c4":{"id":"750ada84-f4c9-4d3d-8a82-1b3aedeb55c4","type":"default","selected":false,"source":"a6dc263c-ee37-4f35-ab6d-6f0aeadae891","sourcePort":"fe3a0b64-3bed-499a-8173-23e75afee83b","target":"c6d10f8f-be79-4c85-a13f-6d818bb74d19","targetPort":"fc309621-95d3-4af7-a1f8-5eef634c1bf2","points":[{"id":"b1ad9738-728e-46c9-b827-0790383d5f5b","type":"point","x":253.5,"y":371.5},{"id":"74d8260b-d5e1-4ac9-a030-5ee4ca2417b7","type":"point","x":139.5,"y":390.5}],"labels":[],"width":3,"color":"gray","curvyness":50,"selectedColor":"rgb(0,192,255)"}}},{"id":"f8e23b12-39a4-4ab9-a0c7-c5aaebe37bca","type":"diagram-nodes","isSvg":false,"transformed":true,"models":{"a6dc263c-ee37-4f35-ab6d-6f0aeadae891":{"id":"a6dc263c-ee37-4f35-ab6d-6f0aeadae891","type":"basic.code","selected":false,"x":245,"y":168,"ports":[{"id":"fe3a0b64-3bed-499a-8173-23e75afee83b","type":"port.input","x":246,"y":364,"name":"Inp","alignment":"left","parentNode":"a6dc263c-ee37-4f35-ab6d-6f0aeadae891","links":["750ada84-f4c9-4d3d-8a82-1b3aedeb55c4"],"in":true,"label":"Inp","hideLabel":false},{"id":"f842511a-7ef2-46ec-bf45-3561fb048720","type":"port.input","x":246,"y":559,"name":"E","alignment":"left","parentNode":"a6dc263c-ee37-4f35-ab6d-6f0aeadae891","links":[],"in":true,"label":"E","hideLabel":false},{"id":"4dcc893d-9413-496f-b57c-c06c253d81a3","type":"port.output","x":1449.65625,"y":461.5,"name":"Out","alignment":"right","parentNode":"a6dc263c-ee37-4f35-ab6d-6f0aeadae891","links":["5be4d477-4996-4e77-afca-804bd4a64ecb"],"in":false,"label":"Out","hideLabel":false},{"id":"21b7a94c-4b1f-481c-96f8-7f4d02db579d","type":"port.parameter","x":847.828125,"y":169,"name":"Frequency","alignment":"top","parentNode":"a6dc263c-ee37-4f35-ab6d-6f0aeadae891","links":["5d161fd7-1725-43d9-98b0-6c5593e351df"],"in":true,"label":"Frequency","hideLabel":false}],"data":{"code":"import cv2 as cv\nimport numpy as np\nfrom time import sleep\nfrom utils.wires.wire_img import share_image, read_image\nfrom utils.wires.wire_str import read_string\nfrom utils.tools.freq_monitor import monitor_frequency\n\ndef loop(block_name, input_wires, output_wires, parameters, flags):\n\n    input_0 = read_image(input_wires[0])\n    output_0 = share_image(output_wires[0])\n\n    enabled = False\n    try:\n        enable_wire = read_string(input_wires[1])\n    except IndexError:\n        enabled = True\n\n    \n    required_frequency, update = float(parameters[0]), 1\n    control_data = np.array([0.0,0.03])\n    \n    if flags[0] == 1:\n        monitor_frequency(block_name, control_data, required_frequency, update)\n\n    try:\n        while True:\n        \n            if enabled or (update := bool(enable_wire.get()[0])):\n    \n                frame = input_0.get()\n                \n                if frame is not None:\n        \n                    flipped = np.zeros(frame.shape)\n\n                    flipped[0] = np.rot90(frame[0], k=2, axes=(0,1))\n                    flipped[1] = np.rot90(frame[1], k=2, axes=(0,1))\n                    flipped[2] = np.rot90(frame[2], k=2, axes=(0,1))\n\n                    output_0.add(flipped)\n    \n                control_data[0] += 1\n                \n            sleep(control_data[1])\n            \n    except KeyboardInterrupt: \n    \n        input_0.release()\n        enable_wire.release()\n        output_0.release()","params":[{"name":"Frequency"}],"ports":{"in":[{"name":"Inp"},{"name":"E"}],"out":[{"name":"Out"}]},"size":{"width":"1100px","height":"19px"}}},"0013-2c01e20d-d2c6-4578-ae88-bfeb945d6a52":{"id":"0013-2c01e20d-d2c6-4578-ae88-bfeb945d6a52","type":"basic.constant","selected":false,"x":691,"y":-14,"ports":[{"id":"dada97d8-6a14-400c-a36b-c784b51b7dc4","type":"port.output","x":744.5,"y":94,"name":"constant-out","alignment":"bottom","parentNode":"0013-2c01e20d-d2c6-4578-ae88-bfeb945d6a52","links":["5d161fd7-1725-43d9-98b0-6c5593e351df"],"in":false,"label":"constant-out","hideLabel":true}],"data":{"name":"Frequency","value":"30.0","local":true}},"c6d10f8f-be79-4c85-a13f-6d818bb74d19":{"id":"c6d10f8f-be79-4c85-a13f-6d818bb74d19","type":"basic.input","selected":false,"x":46,"y":364,"ports":[{"id":"fc309621-95d3-4af7-a1f8-5eef634c1bf2","type":"port.output","x":132,"y":383,"name":"input-out","alignment":"right","parentNode":"c6d10f8f-be79-4c85-a13f-6d818bb74d19","links":["750ada84-f4c9-4d3d-8a82-1b3aedeb55c4"],"in":false,"label":"input-out","hideLabel":true}],"data":{"name":"Inp"}},"ba2a1546-5dce-4914-8b90-206104ef627a":{"id":"ba2a1546-5dce-4914-8b90-206104ef627a","type":"basic.output","selected":false,"x":1597,"y":380,"ports":[{"id":"23a4bf01-9d7e-4cac-b1b2-b33ea02ca54d","type":"port.input","x":1598,"y":399,"name":"output-in","alignment":"left","parentNode":"ba2a1546-5dce-4914-8b90-206104ef627a","links":["5be4d477-4996-4e77-afca-804bd4a64ecb"],"in":true,"label":"output-in","hideLabel":true}],"data":{"name":"Out"}}}}]},"version":"3.0","package":{"name":"","version":"","description":"","author":"","image":""},"design":{"board":"Python3-Noetic","graph":{"blocks":[{"id":"a6dc263c-ee37-4f35-ab6d-6f0aeadae891","type":"basic.code","data":{"code":"import cv2 as cv\nimport numpy as np\nfrom time import sleep\nfrom utils.wires.wire_img import share_image, read_image\nfrom utils.wires.wire_str import read_string\nfrom utils.tools.freq_monitor import monitor_frequency\n\ndef loop(block_name, input_wires, output_wires, parameters, flags):\n\n    input_0 = read_image(input_wires[0])\n    output_0 = share_image(output_wires[0])\n\n    enabled = False\n    try:\n        enable_wire = read_string(input_wires[1])\n    except IndexError:\n        enabled = True\n\n    \n    required_frequency, update = float(parameters[0]), 1\n    control_data = np.array([0.0,0.03])\n    \n    if flags[0] == 1:\n        monitor_frequency(block_name, control_data, required_frequency, update)\n\n    try:\n        while True:\n        \n            if enabled or (update := bool(enable_wire.get()[0])):\n    \n                frame = input_0.get()\n                \n                if frame is not None:\n        \n                    flipped = np.zeros(frame.shape)\n\n                    flipped[0] = np.rot90(frame[0], k=2, axes=(0,1))\n                    flipped[1] = np.rot90(frame[1], k=2, axes=(0,1))\n                    flipped[2] = np.rot90(frame[2], k=2, axes=(0,1))\n\n                    output_0.add(flipped)\n    \n                control_data[0] += 1\n                \n            sleep(control_data[1])\n            \n    except KeyboardInterrupt: \n    \n        input_0.release()\n        enable_wire.release()\n        output_0.release()","params":[{"name":"Frequency"}],"ports":{"in":[{"name":"Inp"},{"name":"E"}],"out":[{"name":"Out"}]},"size":{"width":"1100px","height":"19px"}},"position":{"x":245,"y":168}},{"id":"0013-2c01e20d-d2c6-4578-ae88-bfeb945d6a52","type":"basic.constant","data":{"name":"Frequency","value":"30.0","local":true},"position":{"x":691,"y":-14}},{"id":"c6d10f8f-be79-4c85-a13f-6d818bb74d19","type":"basic.input","data":{"name":"Inp"},"position":{"x":46,"y":364}},{"id":"ba2a1546-5dce-4914-8b90-206104ef627a","type":"basic.output","data":{"name":"Out"},"position":{"x":1597,"y":380}}],"wires":[{"source":{"block":"0013-2c01e20d-d2c6-4578-ae88-bfeb945d6a52","port":"constant-out"},"target":{"block":"a6dc263c-ee37-4f35-ab6d-6f0aeadae891","port":"Frequency"}},{"source":{"block":"a6dc263c-ee37-4f35-ab6d-6f0aeadae891","port":"Out"},"target":{"block":"ba2a1546-5dce-4914-8b90-206104ef627a","port":"output-in"}},{"source":{"block":"c6d10f8f-be79-4c85-a13f-6d818bb74d19","port":"input-out"},"target":{"block":"a6dc263c-ee37-4f35-ab6d-6f0aeadae891","port":"Inp"}}]}},"dependencies":{}}